{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/tslib/tslib.es6.js","webpack:///./src/lib/console.ts","webpack:///./src/lib/ReactiveVars.ts","webpack:///./src/lib/template.ts","webpack:///./src/lib/decorator.ts","webpack:///./src/index.ts","webpack:///./src/lib/VDom.ts","webpack:///./src/lib/vid.ts","webpack:///./src/lib/VDomItem.ts","webpack:///./src/lib/deep.ts","webpack:///./src/lib/VarProxy.ts","webpack:///./src/lib/Transition.ts","webpack:///./src/lib/eventListener.ts","webpack:///./src/lib/lru.ts","webpack:///./src/lib/cssJson.ts","webpack:///./src/lib/emitOn.ts","webpack:///./src/lib/VDomComponent.ts","webpack:///./node_modules/process/browser.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","extendStatics","b","setPrototypeOf","__proto__","Array","__extends","__","this","constructor","__assign","assign","arguments","length","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","target","desc","getOwnPropertyDescriptor","Reflect","decorate","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","iterator","v","op","TypeError","pop","push","__exportStar","__values","__read","ar","error","__spread","concat","__spreadArrays","il","k","a","j","jl","__await","__asyncGenerator","asyncIterator","q","resume","fulfill","settle","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","mod","default","__importDefault","consoleLog","console","log","consoleError","consoleWarn","warn","consoleDebug","CALL_NONE","CALL_FUNCS","CALL_EVENT_HANDLER","updatedElements","updatedFunctions","reactiveVars","reactiveVarsForFunc","vExtContexts","proceccingNodeId","callKind","proceccingFunction","watchies","deepVars","reactived","initReactive","vDom","reactive","watch","callback","option","deep","umountNodeId","nodeId","extContexts","context","cb","unshift","eval","vDomItem","expr","funcParams","$reactiveVars","resultNames","paramNamesForResult","paramNames","params","extContext","ctxKey","$event","split","map","item","trim","param","undefined","evalFuncBody","Function","join","message","rawNode","paramName","substr","strResult","String","forceUpdate","funcName","setUpdateFlag","oldVal","setUpdates","callKindOrg","bChanged","$requestRender","varName","defaultOnly","that","registUpdated","getPrototypeOf","afterGet","set","newVal","update","as","dcopy","process","nextTick","equal","ELEMENT_NODE","TEXT_NODE","COMMENT_NODE","V_TEMPLATE_NODE","V_TEXT_NODE","V_FOR_NODE","V_COMPONENT_NODE","V_HTML_NODE","V_SLOT_NODE","V_COMPONENT_IS_NODE","insertAfter","newItem","parentNode","nextSibling","insertBefore","removeElement","element","removeChild","parseElementAttributes","attrs","attr","nodeValue","readTemplate","template","$document","componentModules","targetDom","parseElementNode","node","parent","attributes","targetChildNode","childNodes","nodeType","tagName","content","VDomItem","vdComponentItem","children","readTemplateSub","vComponent","toLowerCase","vdElementItem","nodes","subResult","tgtEleVDomItem","vForAttr","vForItemParent","vForVDomItem","delimiters","vdItem","vValueParam","escapeChars","str","replace","tag","closeTagPos","lastIndexOf","comments","workEle","createElement","innerHTML","domCount","rootDom","propDefaut","watchesVars","className","descriptor","eventName","method","args","$emit","props","components","css","directives","VDomComponent","Component","Prop","Watch","Emit","Deep","init","$nextTick","document","$window","window","$refs","$vrefs","$root","$created","$mounted","$maxCache","$maxComponentCache","$props","$isComponent","$slotVDomItems","$customDirectives","$inRender","$instanceId","el","isComponent","customDirectives","vName","prop","$beforeunloadEventInfo","addListener","$beforeunload","readyState","$DOMContentLoaded","$DOMContentLoadedEventInfo","$loadEventInfo","Public","beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","$set","$delete","$forceUpdate","$render","renderd","vPrevDomItem","$rootVDom","$mountBeforePos","els","render","$el","$emitOnInit","$mount","startEle","createTextNode","tgtEle","querySelector","appendChild","$mountAfter","existComponentId","VDom","$componentIds","$componentId","cssItem","newSelectors","seletor","splice","newSelector","cssJson","toJSON","toHEAD","resultElement","$umount","$remount","$destroy","removeListener","$umountEmitOn","destroy","$parent","setTimeout","staticCount","Date","getTime","toString","slice","OUTPUT_NODEID","excludeAttributesEx","isExcludeAttribute","test","vForRenderdItems","lazyTransition","elements","markerElementInserted","bindAttributes","renderdAttributes","bindEventsEx","vModelEventsMounted","replaceAll","markerElement","createComment","clone","child","evKey","umountTransition","vModelEventInfo","bindEvents","evInfo","renderdKey","vComponentInstance","vWorkerElement","ele","umount","remount","boforeInsertPos","renderMarker","renderMain","newElement","toLocaleLowerCase","type","setAttribute","renderElementBefore","setupTransition","resetTransitions","vIf","func","TextNode","ElementNode","vTemplate","vComponentElement","vFor","vText","vHtml","vSlot","CommentNode","vComponentIsElement","output","vShow","vOutput","parseVIf","isTransitionTarget","doTransition","eles","parseDirective","style","display","slotName","renderdElements","prevVDomItem","slotInfo","parseSlot","vSlotCtx","vComponentImplElement","componentIs","updateedEle","vComponentInstanceCache","max","dispose","componentName","cachedComponentInstance","vAttributes","parseAttributes","targetElement","doDirective","vAttributesFirst","createdEle","ref","vForInfo","parseVFor","vForCacheItems","beforeElement","data","Number","isInteger","workObject","$indexkey","vForContextKeys","keys","vForContext","index","vForVDom","vChildKey","parseKey","vCachedVDomItem","tgtVDomItem","firstChild","exclude","directiveAttributes","directiveVModel","directiveEvent","directiveEventEx","doExtDirective","extDirectives","expression","vModel","model","multiple","options","selected","eventFunc","tgtValue","filter","selectedIndex","checked","outVal","parseFloat","isNaN","isLazy","component","cmpKey","removeAttribute","exKey","addEvent","eventDef","ev","currentTarget","keyCode","ctrlKey","altKey","shiftKey","metaKey","button","CustomEvent","detail","stopPropagation","preventDefault","captureMode","onceMode","passiveMode","eventOption","capture","once","passive","vEvents","parseEvents","eventKey","bindEventInfo","eleInfo","outEvents","vBindOnly","vStaticStr","outKey","vOut","isArray","cKey","cStyle","vOutStr","vF","pos","$INDEX_KEY","appendKey","directive","noEval","attrKey","src","add","copy","walk","obj","last","dst","object1","object2","parents","equalMain","o1","o2","inParents","t1","t2","isDt1","isDt2","isAr1","isAr2","isObj1","isObj2","keysO1","keysO2","keyO1","handler","varObject","arrayHook","varsHook","getterSetterHook","functionsHook","orgFunc","resultEx","argv","executed","writable","inHandler","oldMethods","proxy","recentValue","oldValue","doArrayHook","setV","afterSet","configurable","setter","transitionEvents","transitionListenEvents","transitionType","transitionEndEvent","transitionEndListner","transition","transitionVDom","isEnter","isTarget","firstElement","setElementEvent","tgtEventEle","targetvInfo","pickListener","kind","inTransision","clearTransitionClasses","dispatchEvent","classList","remove","bindedEventFunc","evinfo","addEventListener","removeEventListener","lengthAll","datas","lists","lengthCb","exists","has","removeTgt","peek","reset","itemCount","commentX","lineAttrX","altX","isEmpty","x","strAttr","depth","strNode","cssString","toCSS","count","match","exec","line","currVal","newNode","sel","att","breaks","at","first","head","getElementsByTagName","HTMLHeadElement","isCssJson","styleSheet","cssText","$addedEvents","$targetEl","eveInfo","event","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","len","run","marker","runClearTimeout","Item","array","noop","title","browser","env","version","versions","on","off","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask"],"mappings":"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","file":"js/vdom.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 86);\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","//\n// tslint:disable: no-console\n//\n\n// export const consoleLog = (...args: any) => {/*noop*/ }\nexport const consoleLog = console.log\n\n//\nexport const consoleError = console.error\n//\nexport const consoleWarn = console.warn\n//\nexport const consoleDebug = console.error\n","import {equal, dcopy} from './deep'\nimport VarProxy from './VarProxy'\nimport { consoleError, consoleWarn, consoleDebug } from './console'\nimport VDom from './VDom'\nimport { VDomItem } from './VDomItem'\n\n//\nexport const CALL_NONE = 0            //\nexport const CALL_FUNCS = 1           // CALL FROM FUNC etc\nexport const CALL_EVENT_HANDLER = 2   // CALL FROM EVENT HANDLER\n\n//\nexport default class ReactiveVar {\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  // VDom instance\n  public vDom: any\n\n  // updated vars\n  public updatedElements: {[key: string]: number } = {}\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  // updated functions\n  private updatedFunctions: {[key: string]: boolean } = {}\n  // reactive vars list\n  private reactiveVars: {[key: string]: any } = {}\n  // reactive funcs list\n  private reactiveVarsForFunc: {[key: string]: any } = {}\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  // for ext context\n  private vExtContexts: Array<{[key: string]: any}> = []\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  // processing nodeId\n  private proceccingNodeId: string = ''\n  // processing function\n  private callKind: number = CALL_NONE\n  // processing function\n  private proceccingFunction: string = ''\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  // for watch vars info\n  private watchies: {[key:string]:{callback: any, option: {deep:boolean}}} = {}\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  // reactived vars list\n  private deepVars: {[key:string]: any} = {}\n\n  // reactived vars list\n  private reactived: {[key: string]: boolean } = {}\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  //\n  constructor(){\n    //\n  }\n\n  //\n  public initReactive(vDom: VDom, deepVars: {[key:string]: any}){\n    this.vDom = vDom\n    this.deepVars = deepVars\n    for(const key in this.vDom){ // tslint:disable-line: forin\n      this.reactive(key, true)\n    }\n  }\n\n  //\n  public watch(target: string, callback: any, option: {deep:boolean} = {deep:false}){\n    this.reactive(target, false)\n    this.watchies[target] = {callback, option}\n  }\n\n  // umount nodeid\n  public umountNodeId(nodeId: string){\n    //\n    delete this.updatedElements[nodeId]\n    //\n    for(const key in this.reactiveVars){\n      if(this.reactiveVars[key][nodeId]){\n        delete this.reactiveVars[key][nodeId]\n      }\n    }\n    //\n  }\n\n  //\n  public extContexts(context: any, cb: () => void){\n    this.vExtContexts.unshift(context)\n    cb()\n    this.vExtContexts.shift()\n  }\n\n  //\n  public eval(vDomItem: VDomItem, callKind: number, expr: string, raw: boolean, funcParams?: any): any {\n    //\n    /* istanbul ignore next */\n    if(!vDomItem.vDom){\n      consoleDebug('INVALID vDomItem.vDom', vDomItem)\n      return\n    }\n\n    //\n    vDomItem.vDom.$reactiveVars.callKind = callKind\n    vDomItem.vDom.$reactiveVars.proceccingNodeId = vDomItem.nodeId\n\n    // for Result\n    let resultNames: string = ''\n    const paramNamesForResult: string[] = []\n    // for eval\n    const paramNames: string[] = []\n    const params: any[] = []\n\n    // ext contexts\n    for(const extContext of this.vExtContexts){\n      for(const ctxKey in extContext){  // tslint:disable-line forin\n        if(paramNames.indexOf(ctxKey) < 0){\n          paramNames.push(ctxKey)\n          let value = extContext[ctxKey]\n          if(typeof value === 'function'){\n            value = value.bind(vDomItem.vDom)\n          }\n          params.push(value)\n          //\n          if(ctxKey === '$event'){\n            this.vDom.$event = value\n          }\n          //\n        }\n      }\n    }\n\n    // vars in script\n    const useParams = expr.split(/[ !-#%-/:-@[-^`{-~]/).map(item => item.trim())  // $ _ a-z A-Z 0-9\n    for(const param of useParams){\n      if(!param){\n        continue\n      }\n      let value = (vDomItem.vDom as any)[param]\n      if(value === undefined){\n        continue\n      }\n\n      // add reactive target\n      this.reactive(param, true)\n\n      //\n      // if(this.evalVars[param]){\n        if(paramNames.indexOf(param) < 0){\n          //\n          resultNames += `${param},`\n          paramNamesForResult.push(param)\n          //\n          paramNames.push(param)\n          if(typeof value === 'function'){\n            value = value.bind(vDomItem.vDom)\n          }\n          params.push(value)\n        }\n      // }\n    }\n\n    // tarminator\n    resultNames += 'undefined'\n\n    //\n    const evalFuncBody = `var result = (${expr}); return {result: result, params: [${resultNames}]};`\n\n    // eval\n    let result: any = {result: '', params: []}\n    try{\n      // eval\n      result = Function(paramNames.join(','), evalFuncBody).apply(vDomItem.vDom, params)\n      // result is function\n      if(typeof result.result === 'function'){\n        result = {result: (result.result as () => void).apply(vDomItem.vDom, funcParams), params: result.params}\n      }\n    }catch(e){\n      /* istanbul ignore next */\n      this.updatedElements[vDomItem.nodeId] = CALL_FUNCS\n      /* istanbul ignore next */\n      consoleError(`VDom eval error ${e.message}`, vDomItem.rawNode/*, evalFuncBody*/)\n      /* istanbul ignore next */\n      consoleDebug(`VDom eval body`, evalFuncBody)\n    }\n\n    // back to org vars\n    for(let i = 0; i < paramNamesForResult.length; i++){ // tslint:disable-line prefer-for-of\n      const paramName = paramNamesForResult[i]\n      // $xxx\n      if(paramName.substr(0,1) === '$'){continue}\n      // func\n      if(typeof (vDomItem.vDom as any)[paramName] === 'function'){continue}\n      // target is unknown\n      if(!(paramName in (vDomItem.vDom as any))){continue}\n      // if((vDomItem.vDom as any)[paramName] === undefined){continue}\n      // same\n      if((vDomItem.vDom as any)[paramName] === result.params[i]){continue}\n      // save back\n      (vDomItem.vDom as any)[paramName] = result.params[i]\n    }\n\n    //\n    vDomItem.vDom.$reactiveVars.proceccingNodeId = ''\n    vDomItem.vDom.$reactiveVars.callKind = CALL_NONE\n\n    // create result\n    if(typeof result.result === 'object'){\n      //\n      // console.log(\"===>>\", raw, expr, result)\n      //\n      if(raw){\n        return result.result\n      }\n      // toString handler\n      let strResult = ''\n      try{\n        strResult = String(result.result)\n        // console.log(\"===>>\", raw, expr, strResult)\n      }catch(e){\n        /* istanbul ignore next */\n        consoleWarn(`VDom can't convert to string`, result.result)   // TypeError!\n      }\n      return strResult\n    }\n    //\n    return result.result\n    //\n  }\n\n  //\n  public forceUpdate(){\n    //\n    for(const nodeId in this.updatedElements){  // tslint:disable-line forin\n      this.updatedElements[nodeId] = CALL_FUNCS\n    }\n    for(const funcName in this.updatedFunctions){  // tslint:disable-line forin\n      this.updatedFunctions[funcName] = true\n    }\n    //\n  }\n\n  //\n  public setUpdateFlag(object: object | any[], oldVal: any){\n    //\n    for(const key in this.vDom){\n      if(this.vDom[key] === object){\n        //\n        if(this.watchies[key]){\n          this.watchies[key].callback(object, oldVal)\n        }\n        //\n        // console.log(\"FROM C\", key)\n        this.setUpdates(key, CALL_FUNCS)\n        break\n      }\n    }\n  }\n\n  //\n  private setUpdates(key: string, callKindOrg: number){\n    //\n    const callKind = callKindOrg || CALL_FUNCS\n    //\n    let bChanged = false\n    for(const nodeId in this.reactiveVars[key]){\n      if(this.reactiveVars[key][nodeId]){\n        this.updatedElements[nodeId] = callKind\n        // console.log(\"updatedElements\", key, nodeId)\n        bChanged = true\n      }\n    }\n    //\n    for(const funcName in this.reactiveVarsForFunc[key]){\n      if(this.reactiveVarsForFunc[key][funcName]){\n        this.updatedFunctions[funcName] = true\n        // console.log(\"updatedFunctions\", key, funcName)\n      }\n    }\n\n    //\n    if(bChanged){\n      this.vDom.$requestRender()\n    }\n    //\n  }\n\n  //\n  private reactive(varName: string, defaultOnly: boolean): void{\n    //\n    const that = this\n\n    //\n    if(this.reactived[varName] !== undefined){\n      return\n    }\n\n    //\n    if(defaultOnly){\n      //\n      const reserved = [\n        //\n        'constructor',\n        'el',\n        //\n        'updated',\n        'beforeDestroy',\n        'destroyed',\n        //\n      ]\n      // inner member reject\n      if(varName.substr(0,1) === '$'){\n        return\n      }\n      //\n      if(reserved.indexOf(varName) >= 0){\n        return\n      }\n      //\n    }\n\n    //\n    let deep = false\n    if(this.deepVars && !!(varName in this.deepVars)){\n      deep = true\n    }\n\n    // set reactived\n    this.reactived[varName] = true\n\n    //////////////////////////////////////////////////////////////////////////\n\n    const registUpdated = (key: string, nodeId: string, funcName: string) => {\n      //\n      if(nodeId){\n        that.reactiveVars[key] = that.reactiveVars[key] || {}\n        that.reactiveVars[key][nodeId] = true\n      }\n      //\n      if(funcName){\n        that.reactiveVarsForFunc[key] = that.reactiveVarsForFunc[key] || {}\n        if(!that.reactiveVarsForFunc[key][funcName]){\n          that.reactiveVarsForFunc[key][funcName] = true\n        }\n      }\n      //\n    }\n\n    //////////////////////////////////////////////////////////////////////////\n\n    // typeof var\n    const vVarType = typeof this.vDom[varName]\n\n    //////////////////////////////////////////////////////////////////////////\n    // function\n    //////////////////////////////////////////////////////////////////////////\n\n    // functions hook\n    if(vVarType === 'function'){\n      return\n    }\n\n    //////////////////////////////////////////////////////////////////////////\n    // computed var\n    //////////////////////////////////////////////////////////////////////////\n\n    const varObject = Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.vDom), varName)\n    if(varObject){\n      let oldResult: any\n      // tslint:disable-next-line: no-unused-expression\n      new VarProxy(this.vDom, varName, {\n        get: () => {\n          //\n          if(that.callKind !== CALL_EVENT_HANDLER && that.updatedFunctions[varName] === false){\n            return oldResult\n          }\n          that.proceccingFunction = varName\n          registUpdated(varName, that.proceccingNodeId, that.proceccingFunction)\n          //\n        },\n        afterGet: (result: any) => {\n          //\n          that.proceccingFunction = ''\n          that.updatedFunctions[varName] = false\n          oldResult = result\n          //\n        },\n        set: (newVal: any, option: boolean) => {\n          that.updatedFunctions[varName] = true\n        },\n        update: (newVal: any, oldVal: any, as: boolean) => {\n          //\n        }\n      }, {deep})\n      return\n    }\n\n    //////////////////////////////////////////////////////////////////////////\n    // normal var\n    //////////////////////////////////////////////////////////////////////////\n\n    //\n    {\n      let lastCallKind = CALL_FUNCS // NONE\n      // tslint:disable-next-line: no-unused-expression\n      new VarProxy(this.vDom, varName, {\n        afterGet: (result: any) => {\n          //\n          lastCallKind = that.callKind\n          //\n          registUpdated(varName, that.proceccingNodeId, that.proceccingFunction)\n          //\n          if(that.watchies[varName] && that.watchies[varName].option.deep === true){\n            const oldVal = dcopy(result)\n            ;(process as any).nextTick(() => {\n              if(!equal(dcopy(result), oldVal)){\n                that.watchies[varName].callback(result, oldVal)\n              }\n            })\n          }\n          //\n        },\n        set: (newVal: any, option: boolean) => {\n          // console.log(\"FROM A\", varName, newVal)\n          that.setUpdates.bind(that)(varName, lastCallKind)\n        },\n        update: (newVal: any, oldVal: any, option: boolean) => {\n          // console.log(\"FROM B\", varName)\n          //\n          that.setUpdates.bind(that)(varName, lastCallKind)\n          if(that.watchies[varName] && that.watchies[varName].option.deep !== true){\n            that.watchies[varName].callback(newVal, oldVal)\n          }\n          //\n        }\n      }, {deep})\n      //\n    }\n  }\n  //\n}\n","import VDom from './VDom'\nimport {VDomItem} from './VDomItem'\nimport {consoleError, consoleWarn, consoleDebug} from './console'\n\n//\nexport const ELEMENT_NODE = 1\nexport const TEXT_NODE = 3\nexport const COMMENT_NODE = 8\n//\nexport const V_TEMPLATE_NODE = 1000\nexport const V_TEXT_NODE = 1001\nexport const V_FOR_NODE = 1002\nexport const V_COMPONENT_NODE = 1003\nexport const V_HTML_NODE = 1004\nexport const V_SLOT_NODE = 1005\nexport const V_COMPONENT_IS_NODE = 1006\n\n/*\nexport const replaceElement = (newItem: Node, oldItem: Node): void => {\n  if(oldItem.parentNode){\n    oldItem.parentNode.replaceChild(newItem, oldItem)\n  }\n}\n*/\n\n//\nexport const insertAfter = (newItem: Node, target: Node): Node => {\n  /* istanbul ignore next */\n  if(!target.parentNode){\n    consoleDebug('VDomItem invalid insertAfter')\n    return newItem\n  }\n  if(newItem !== target.nextSibling){\n    target.parentNode.insertBefore(newItem, target.nextSibling)\n  }\n  return newItem\n}\n\n//\nexport const removeElement = (element: Node): void => {\n  if(!element.parentNode){\n    // consoleDebug('VDomItem already removeChild')\n    return\n  }\n  element.parentNode.removeChild(element)\n}\n\n//\nexport const parseElementAttributes = (attrs: NamedNodeMap): {[key:string]: string} => {\n  //\n  const result: {[key:string]: string} = {}\n  for (let i = 0; i < attrs.length; i++) { // tslint:disable-line prefer-for-of\n    const attr = attrs[i]\n    // if(attr.name){\n    // }\n    if(attr.nodeValue){\n      result[attr.name] = attr.nodeValue\n    }else{\n      result[attr.name] = ''\n    }\n  }\n  return result\n  //\n}\n\n//\nexport const readTemplate = (vDom: VDom, template: string, $document: Document, componentModules: any): VDomItem | undefined => {\n\n  //\n  const parseElementNode = (node: Element, parent?: VDomItem): VDomItem => {\n\n    // read attrbutes\n    const attributes = parseElementAttributes(node.attributes)\n\n    //\n    let targetChildNode: NodeListOf<ChildNode> = node.childNodes\n    let nodeType = ELEMENT_NODE\n\n    // transition node\n    if((node as Element).tagName === 'TRANSITION'){\n      nodeType = V_TEMPLATE_NODE\n    }\n\n    // template node\n    if((node as Element).tagName === 'TEMPLATE'){\n      // DocumentFragment\n      if ('content' in (node as any)) {\n        targetChildNode = (node as any).content.childNodes\n      }\n      nodeType = V_TEMPLATE_NODE\n    }\n\n    // slot node\n    if((node as Element).tagName === 'SLOT'){\n      nodeType = V_SLOT_NODE\n    }\n\n    // v-text node\n    if(attributes && attributes['v-text']){\n      const vdValueItem = new VDomItem({\n        rawNode: node,\n        vDom,\n        nodeType: V_TEXT_NODE,\n        tagName: 'v-text',\n        attributes: {'v-text': attributes['v-text']},\n        parent\n      })\n      return vdValueItem\n    }\n\n    // v-html node\n    if(attributes && attributes['v-html']){\n      const vdHtmlItem = new VDomItem({\n        rawNode: node,\n        vDom,\n        nodeType: V_HTML_NODE,\n        tagName: 'v-html',\n        attributes: {'v-html': attributes['v-html']},\n        parent\n      })\n      return vdHtmlItem\n    }\n\n    // component node\n    if((node as Element).tagName === 'COMPONENT'){\n      //\n      const vdComponentItem = new VDomItem({\n        rawNode: node,\n        vDom,\n        nodeType: V_COMPONENT_IS_NODE,\n        tagName: node.tagName,\n        attributes,\n        parent,\n      })\n      // read slot\n      vdComponentItem.children =  readTemplateSub(node.childNodes, vdComponentItem)\n      return vdComponentItem\n      //\n    }\n\n    // component node\n    if(componentModules){\n      let vComponent\n      for(const key in componentModules){ // tslint:disable-line forin\n        if(node.tagName.toLowerCase() === key.toLowerCase()){\n          //\n          const vdComponentItem = new VDomItem({\n            rawNode: node,\n            vDom,\n            nodeType: V_COMPONENT_NODE,\n            tagName: node.tagName,\n            attributes,\n            vComponent: componentModules[key],\n            parent,\n          })\n          // read slot\n          vdComponentItem.children =  readTemplateSub(node.childNodes, vdComponentItem)\n          vComponent = vdComponentItem\n          break\n          //\n        }\n      }\n      if(vComponent){\n        return vComponent\n      }\n    }\n\n    // element or template node\n    const vdElementItem = new VDomItem({\n      rawNode: node,\n      vDom,\n      nodeType,\n      tagName: node.tagName,\n      attributes,\n      parent\n    })\n    vdElementItem.children =  readTemplateSub(targetChildNode, vdElementItem)\n    return vdElementItem\n\n  }\n\n  //\n  const readTemplateSub = (nodes: NodeListOf<ChildNode>, parent?: VDomItem): VDomItem[] => {\n    //\n    const subResult: VDomItem[] = []\n\n    for (let i = 0; i < nodes.length; i++) {  // tslint:disable-line prefer-for-of\n      //\n      const node = (nodes[i] as Element)\n      //\n      switch(node.nodeType){\n        case ELEMENT_NODE:{\n\n          //\n          const tgtEleVDomItem = parseElementNode(node, parent)\n\n          // vFor element\n          if(tgtEleVDomItem.attributes['v-for']){\n            //\n            const vForAttr = Object.assign({}, tgtEleVDomItem.attributes)\n            delete tgtEleVDomItem.attributes['v-for']\n            delete tgtEleVDomItem.attributes['ref']\n            //\n            const vForItemParent = new VDomItem({\n              rawNode: node,\n              vDom,\n              nodeType: V_FOR_NODE,\n              tagName: 'v-for',\n              attributes: vForAttr,\n              vForVDomItem: tgtEleVDomItem,\n              parent\n            })\n            subResult.push(vForItemParent)\n            //\n            break\n            //\n          }\n\n          // normal elements\n          subResult.push(tgtEleVDomItem)\n\n          //\n        }break\n        case TEXT_NODE:{\n          //\n          /* istanbul ignore next */\n          if(!node.nodeValue){\n            consoleDebug('INVALID nodeValue', node)\n            break\n          }\n\n          const delimiters = (vDom.constructor as any).delimiters || ['{{','}}']\n          //\n          if(node.nodeValue.indexOf(delimiters[0]) < 0){\n            //\n            const vdItem = new VDomItem({\n              rawNode: node,\n              vDom,\n              nodeType: TEXT_NODE,\n              nodeValue: node.nodeValue,\n              parent\n            })\n            subResult.push(vdItem)\n            //\n          }else{\n            //\n            let vValueParam = `''`\n\n            //\n            const escapeChars = (str: string) => {\n              return str\n              .replace(/\\t/g, '\\\\t')\n              .replace(/\\r/g, '\\\\r')\n              .replace(/\\n/g, '\\\\n')\n              .replace(/'/g, `\\\\'`)\n            }\n\n            //\n            const vTags = node.nodeValue.split(delimiters[0])\n            for(const tag of vTags){\n              //\n              const closeTagPos = tag.lastIndexOf(delimiters[1])\n              if(closeTagPos >= 0){\n                // split v-text & after text\n                const vValue = tag.substr(0, closeTagPos)\n                const afterText = tag.substr(closeTagPos + 2)\n                //\n                vValueParam += `+ (${vValue}) + '${escapeChars(afterText)}'`\n                //\n              }else{\n                // pure text node\n                vValueParam += `+ '${escapeChars(tag)}'`\n                //\n              }\n            }\n            //\n            const vdItem = new VDomItem({\n              rawNode: node,\n              vDom,\n              nodeType: V_TEXT_NODE,\n              tagName: 'v-text',\n              attributes: {'v-text': vValueParam},\n              parent\n            })\n            subResult.push(vdItem)\n            //\n          }\n          //\n        }break\n        case COMMENT_NODE:{\n          //\n          if((vDom.constructor as any).comments === false){\n            break\n          }\n          //\n          /* istanbul ignore next */\n          if(!node.nodeValue){\n            consoleDebug('INVALID nodeValue', node)\n            break\n          }\n\n          // igunore comment node\n          if(node.nodeValue.substr(0, 1) === '-'){\n            // igunore\n            break\n          }\n\n          //\n          const vdItem = new VDomItem({\n            rawNode: node,\n            vDom,\n            nodeType: COMMENT_NODE,\n            nodeValue: node.nodeValue,\n            parent\n          })\n          subResult.push(vdItem)\n          //\n        }break\n        /* istanbul ignore next */\n        default:{\n          consoleDebug('UNSUPPORTED NODE TYPE', node)\n        }break\n      }\n    }\n    //\n    return subResult\n    //\n  }\n\n  //\n  const workEle = $document.createElement('div')\n  workEle.innerHTML = template\n  //\n  let targetDom\n  let domCount = 0\n  for(let i = 0; i < workEle.childNodes.length; i++){ // tslint:disable-line prefer-for-of\n    const tgtEle = workEle.childNodes[i]\n    if(tgtEle.nodeType !== ELEMENT_NODE){\n      continue\n    }\n    if(targetDom === undefined){\n      targetDom = i\n    }\n    ++domCount\n  }\n  //\n  if(domCount === 0 || targetDom === undefined){\n    consoleError(`VDom no element in template. ${template}`)\n    return\n  }\n  if(domCount > 1){\n    consoleWarn(`VDom too many elements(${domCount}). ${template}`)\n  }\n\n  //\n  const rootDom: Element = (workEle.childNodes[targetDom] as Element)\n  //\n  const result = new VDomItem({\n    rawNode: rootDom,\n    vDom,\n    nodeType: ELEMENT_NODE,\n    attributes: parseElementAttributes(rootDom.attributes),\n    tagName: rootDom.tagName,\n  })\n  result.children = readTemplateSub(rootDom.childNodes, result)\n  //\n  return result\n  //\n}\n","import VDom from './VDom'\nimport {VDomItem} from './VDomItem'\nimport { consoleError } from './console'\n\n//\nexport const deepVars: {[key:string]: {[key:string]: any}} = {}\nexport const propDefaut: {[key:string]: {[key:string]: {default: string} | true}} = {}\nexport const watchesVars: {[key:string]: {[key:string]: {callback: any, option: {deep: boolean, immediate?: boolean}}}} = {}\n\n//\nexport function Deep(option?: any) {\n  return (target: VDom, varName: string) => {\n    const className = target.constructor.name\n    deepVars[className] = deepVars[className] || {}\n    deepVars[className][varName] = true\n  }\n}\n\n//\nexport function Watch(key: string, option: {deep: boolean, immediate?: boolean} = {deep: false}) {\n  return (target: any, name: string, descriptor: PropertyDescriptor) => {\n    const className = target.constructor.name\n    watchesVars[className] = watchesVars[className] || {}\n    watchesVars[className][key] = {callback: descriptor.value, option}\n  }\n}\n\n//\nexport function Emit(eventName: string, option?: any) {\n  return (target: any, name: string, descriptor: PropertyDescriptor) => {\n    const method = descriptor.value\n    descriptor.value = function(...args: any){\n      const result = method.apply(this, args)\n      ;(this as any).$emit(eventName, result)\n    }\n  }\n}\n\n//\nexport function Prop(option?: {default: any}) {\n  return (target: VDom, props: string) => {\n    const className = target.constructor.name\n    propDefaut[className] = propDefaut[className] || {}\n    if(option !== undefined){\n      propDefaut[className][props] = option\n    }else{\n      propDefaut[className][props] = true\n    }\n  }\n}\n\n//\nexport function Component(option?: {\n    components?: any,\n    template?: string,\n    css?: string,\n    delimiters?: [string, string],\n    comments?: boolean\n    directives?: {[key: string]: (el: Element, binding: { name: string, value: any, expression: string }, vnode: VDomItem) => void}\n  }) {\n  return (target: any) => {\n    /* istanbul ignore next */\n    if(!option){\n      return\n    }\n    target.components = option.components\n    target.template = option.template\n    target.delimiters = option.delimiters\n    target.comments = option.comments\n    target.css = option.css\n    target.directives = option.directives\n  }\n}\n","import VDom, {WATCH, COMPONENTS}  from './lib/VDom'\nimport VDomComponent  from './lib/VDomComponent'\nimport {VDomItem} from './lib/VDomItem'\nimport {Component, Prop, Watch, Emit, Deep} from './lib/decorator'\nimport {equal, dcopy} from './lib/deep'\n\n//\nexport default VDom\nexport {VDomComponent, VDomItem, Component, Prop, Watch, Deep, Emit, WATCH, COMPONENTS}\nexport {equal, dcopy}\n","import {consoleError, consoleDebug, consoleWarn, consoleLog} from './console'\nimport vid from './vid'\nimport ReactiveVars from './ReactiveVars'\n//\nimport {readTemplate, insertAfter, removeElement} from './template'\nimport {VDomItem} from './VDomItem'\n// import VDomComponent from './VDomComponent'\nimport {toJSON, toCSS, toHEAD} from './cssJson'\nimport {propDefaut, watchesVars, deepVars} from './decorator'\nimport EmitOn from './emitOn'\nimport {addListener, removeListener, /*isEqualListener, */ListenEventInfo} from './eventListener'\nimport {equal, dcopy} from './deep'\n\n//\nexport interface WATCH {[key:string]: {handler: (n:any, o?:any) => void, deep?: boolean}}\nexport interface COMPONENTS {[key:string]: any}\n\n\n//\nexport default class VDom extends EmitOn{\n\n  // component id list\n  private static $componentIds: {[key: string]: string} = {}\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  public readonly el?: Node | string\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  // mounted element\n  public $el?: Node\n  // nextTick\n  public readonly $nextTick = (process as any).nextTick\n  // browser instance\n  public readonly $document: Document = document\n  // browser instance\n  public readonly $window: Window = window\n  // refs\n  public $refs: {[key: string]: any} = {}\n  // refs\n  public $vrefs: {[key: string]: VDomItem} = {}\n\n  // root VDom\n  public $root: VDom = this\n  // parent VDom\n  public $parent?: VDom\n  // root VDomItem\n  public $rootVDom?: VDomItem\n\n  // created\n  public $created: boolean = false\n  // read dom mounted\n  public $mounted: boolean = false\n\n  // max cache vdom item / vdomitem\n  public $maxCache: number = 100\n  // max cache vdomcomponent\n  public $maxComponentCache: number = 10\n\n  // props\n  public $props: {[key: string]: any} = {}\n\n  //////////////////////////////////////////////////////////////////////////////\n  //////////////////////////////////////////////////////////////////////////////\n\n  // componentId\n  public $instanceId!: string\n\n  // is component VDom\n  public readonly $isComponent: boolean = false\n  // componentId\n  public $componentId?: string\n\n  // event param (dummy)\n  public $event: any\n\n  // reactive vars\n  public $reactiveVars : ReactiveVars = new ReactiveVars()\n  // slot template data\n  public $slotVDomItems: VDomItem[] = []\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  // directives\n  public $customDirectives: {[key:string]: (el: Element, binding: {name: string, value: any, expression: string}, vnode: VDomItem) => void} = {}\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  // mount before position\n  private $mountBeforePos?: Node\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  // finished render\n  private $inRender: boolean = false\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  // for loaded dom\n  private readonly $DOMContentLoadedEventInfo?: ListenEventInfo\n  // for loaded dom\n  private readonly $loadEventInfo?: ListenEventInfo\n  // for unload\n  private readonly $beforeunloadEventInfo?: ListenEventInfo\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  //\n  constructor(init?: {el?: string, isComponent?: boolean, $document?: Document, $window?: Window}){\n    //\n    super()\n    //\n    this.$instanceId = vid()\n    //\n    if(init){\n      //\n      if(init.el !== undefined){\n        this.el = init.el\n      }\n      if(init.isComponent !== undefined){\n        this.$isComponent = init.isComponent\n      }\n      if(init.$document !== undefined){\n        this.$document = init.$document\n      }\n      if(init.$window !== undefined){\n        this.$window = init.$window\n      }\n      //\n    }\n\n    // custom directives\n    const customDirectives = (this.constructor as any).directives\n    if(customDirectives){\n      for(const vName in customDirectives){  // tslint:disable-line forin\n        this.$customDirectives[`v-${vName}`] = customDirectives[vName]\n      }\n    }\n\n    // load props\n    const props = propDefaut[this.constructor.name]\n    for(const prop in props){  // tslint:disable-line forin\n      if(props[prop] === true){\n        if((this as any)[prop] === undefined){\n          (this as any)[prop] = '' // null\n        }\n      }else{\n        (this as any)[prop] = (props[prop] as any).default\n      }\n      this.$props[prop] = (this as any)[prop]\n    }\n\n    // root component\n    if(!this.$isComponent){\n      //\n      this.$beforeunloadEventInfo = addListener(this.$document, 'beforeunload', this.$beforeunload, this.$beforeunload.bind(this))\n      //\n      if (document.readyState !== 'loading') {\n        this.$nextTick(() => {\n          this.$DOMContentLoaded()\n        })\n      } else {\n        /* istanbul ignore next */\n        this.$DOMContentLoadedEventInfo = addListener(this.$document, 'DOMContentLoaded', this.$DOMContentLoaded, this.$DOMContentLoaded.bind(this))\n        /* istanbul ignore next */\n        this.$loadEventInfo = addListener(this.$document, 'load', this.$DOMContentLoaded, this.$DOMContentLoaded.bind(this))\n      }\n      //\n    }\n    //\n  }\n\n  /* istanbul ignore next */\n  public Public(key: string){\n    const target = (this as any)[key]\n    if(target === undefined){\n      consoleDebug(`VDom '${key}' member/method is not implemented`)\n    }\n    if(typeof target === 'function'){\n      return target.bind(this)\n    }\n    return target\n  }\n  //\n\n  // for override\n  public beforeCreate(){/**/}\n  public created(){/**/}\n  public beforeMount(){/**/}\n  public mounted(el: Node | undefined | null){/**/}\n  public beforeUpdate(){/**/}\n  public updated(el: Node | undefined | null){/**/}\n  public beforeDestroy(){/**/}\n  public destroyed(){/**/}\n\n  //\n  public $set(object: object | any[], key: string | number, value: any){\n    //\n    const oldVal = dcopy(object as any)\n    //\n    ;(object as any)[key] = value\n    this.$reactiveVars.setUpdateFlag(object, oldVal)\n  }\n  //\n  public $delete(object: object | any[], key: string | number){\n    //\n    const oldVal = dcopy(object as any)\n    //\n    delete (object as any)[key]\n    this.$reactiveVars.setUpdateFlag(object, oldVal)\n  }\n\n  /*\n  public $watch(target: string, callback: any, option: {deep:boolean} = {deep:false}){\n    this.$reactiveVars.watch(target, callback, option)\n  }\n  */\n\n  //\n  public $forceUpdate(){\n    this.$reactiveVars.forceUpdate()\n    this.$render(true)\n  }\n\n  //\n  public $render(forceUpdate: boolean = false, renderd?: (vDom: VDom, element:Node) => void, vPrevDomItem?: VDomItem): Node | undefined{\n    //\n    if(this.$mounted){\n      this.beforeUpdate()\n    }else{\n      this.beforeMount()\n    }\n    //\n    if(this.$rootVDom && this.$mountBeforePos){\n      const els = this.$rootVDom.render(this.$mountBeforePos, vPrevDomItem || null, forceUpdate)\n      if(els.length !== 1){\n        /* istanbul ignore next */\n        consoleDebug('INVALID render result', els.length)\n      }else{\n        this.$el = els[0]\n      }\n    }\n    //\n    if(this.$el){\n      this.$emitOnInit(this.$el as Element)\n    }\n    //\n    if(this.$el && renderd){\n      renderd(this, this.$el)\n    }\n    this.$inRender = false\n    //\n    if(this.$mounted){\n      this.updated(this.$el ? this.$el.parentNode: undefined)\n    }else{\n      this.mounted(this.$el ? this.$el.parentNode: undefined)\n    }\n    //\n    return this.$el\n    //\n  }\n\n  //\n  public $mount(el: Node | string, renderd?: (vDom: VDom, element:Node) => void): void{\n    //\n    /* istanbul ignore next */\n    if((this.constructor as any).template === undefined){\n      consoleError('VDom invalid template', this.constructor.name)\n      return\n    }\n    /* istanbul ignore next */\n    if(this.$mounted){\n      return\n    }\n    //\n    // const startEle = this.$document.createComment('VDOM-START-POS')\n    const startEle = this.$document.createTextNode('')\n    //\n    if(typeof el === 'string'){\n      const tgtEle = this.$document.querySelector(el)\n      /* istanbul ignore next */\n      if(!tgtEle){\n        consoleError('VDom invalid selector', el)\n        return\n      }\n      tgtEle.appendChild(startEle)\n    }else{\n      el.appendChild(startEle)\n    }\n    this.$mountAfter(startEle, renderd)\n    //\n  }\n\n  //\n  public $mountAfter(startEle: Node, renderd?: (vDom: VDom, element:Node) => void): Node | undefined{\n    //\n    /* istanbul ignore next */\n    if((this.constructor as any).template === undefined){\n      consoleError('VDom no template')\n      return\n    }\n    /* istanbul ignore next */\n    if(this.$mounted){\n      return\n    }\n    //\n    this.beforeCreate()\n\n    // initialize reactive\n    deepVars[this.constructor.name] = deepVars[this.constructor.name] || {}\n    this.$reactiveVars.initReactive(this, deepVars[this.constructor.name])\n\n    // set watch\n    const watchies = watchesVars[this.constructor.name]\n    for(const key in watchies){ // tslint:disable-line forin\n      this.$reactiveVars.watch(key, watchies[key].callback.bind(this), watchies[key].option)\n    }\n\n    //\n    this.$mountBeforePos = startEle\n    //\n    const existComponentId = VDom.$componentIds[this.constructor.name]\n\n    // create component id\n    if(!this.$componentId){\n      //\n      this.$componentId = VDom.$componentIds[this.constructor.name] = VDom.$componentIds[this.constructor.name] || vid()\n\n      // mount css\n      if(!existComponentId && (this.constructor as any).css){\n        //\n        const addComponenId = (cssItem: {attributes: any, children: any}) => {\n          for(const key in cssItem.children){ // tslint:disable-line forin\n            //\n            addComponenId(cssItem.children[key])\n            //\n            const newSelectors = []\n            if(key.substr(0,1) !== '@'){\n              const selectorImtes = key.trim().split(',')\n              for(const selecors of selectorImtes){\n                //\n                const seletor = selecors.trim().split(' ')\n                //\n                const deep = seletor.indexOf('/deep/')\n                if(deep > 0){\n                  seletor[deep - 1] = `${seletor[deep - 1]}[${this.$componentId}]`\n                }else{\n                  seletor[seletor.length - 1] = `${seletor[seletor.length - 1]}[${this.$componentId}]`\n                }\n                //\n                if(deep >= 0){\n                  seletor.splice(deep, 1)\n                }\n                //\n                const newSelector = seletor.join(' ')\n                //\n                newSelectors.push(newSelector)\n                //\n              }\n            }else{\n              newSelectors.push(`${key} `)\n            }\n            cssItem.children[newSelectors.join(',')] = cssItem.children[key]\n            delete cssItem.children[key]\n          }\n          //\n        }\n        //\n        const cssJson = toJSON((this.constructor as any).css)\n        addComponenId(cssJson)\n        // console.log(\"MOUNT CSS ===============>\", this.constructor.name, toCSS(cssJson))\n        toHEAD(cssJson)\n        //\n      }\n\n    }\n\n    // read template\n    if(!this.$rootVDom){\n      //\n      this.$rootVDom = readTemplate(this, (this.constructor as any).template, this.$document, (this.constructor as any).components)\n      if(this.$rootVDom){\n        this.$rootVDom.attributes = this.$rootVDom.attributes || {}\n        if((this.constructor as any).css){\n          this.$rootVDom.attributes[this.$componentId] = ''\n        }\n      }\n    }\n    // created\n    this.$created = true\n    this.created()\n    // first render\n    const resultElement = this.$render(true, renderd)\n    this.$mounted = true\n    //\n    return resultElement\n    //\n  }\n  //\n  public $umount(){\n    if(this.$el){\n      removeElement(this.$el)\n    }\n  }\n  //\n  public $remount(){\n    if(this.$el && this.$mountBeforePos){\n      insertAfter(this.$el, this.$mountBeforePos)\n    }\n  }\n\n  //\n  public $destroy(){\n    //\n    this.beforeDestroy()\n    //\n    /* istanbul ignore next */\n    if(this.$DOMContentLoadedEventInfo !== undefined){\n      removeListener(this.$DOMContentLoadedEventInfo)\n    }\n    /* istanbul ignore next */\n    if(this.$loadEventInfo !== undefined){\n      removeListener(this.$loadEventInfo)\n    }\n    if(this.$beforeunloadEventInfo !== undefined){\n      removeListener(this.$beforeunloadEventInfo)\n    }\n    //\n    this.$umountEmitOn()\n\n    //\n    this.$slotVDomItems = []\n    this.$vrefs = {}\n    this.$refs = {}\n\n    //\n    if(this.$rootVDom){\n      this.$rootVDom.destroy()\n    }\n\n    //\n    if(this.$el){\n      removeElement(this.$el)\n    }\n\n    //\n    this.$rootVDom = undefined\n    this.$parent = undefined\n    //\n    this.destroyed()\n    //\n  }\n\n  //\n  private $requestRender(){\n    //\n    /* istanbul ignore next */\n    if(!this.$mounted){\n      return\n    }\n    //\n    if(!this.$inRender){\n      this.$inRender = true\n      //\n      setTimeout(() => {\n        this.$render.bind(this)()\n      }, 10)  // 100 frame / sec\n      //\n    }\n  }\n\n  //\n  private $DOMContentLoaded(){\n    if(this.el){\n      this.$mount(this.el)\n    }\n  }\n\n  //\n  private $beforeunload(){\n    this.$destroy()\n  }\n\n}\n","//\nlet staticCount = 0\n\n//\nexport default function vid() {\n  /* istanbul ignore next */\n  if (staticCount > 10000) {\n    staticCount = 0\n  }\n  return `v-${new Date().getTime().toString(36)}${('00' + (staticCount++).toString(36)).slice(-2)}`\n}\n","import vid from './vid'\nimport VDom from './VDom'\nimport VDomComponent from './VDomComponent'\nimport { consoleError, consoleWarn, consoleDebug, consoleLog } from './console'\nimport { CALL_NONE, CALL_EVENT_HANDLER, CALL_FUNCS } from './ReactiveVars'\nimport {\n  insertAfter, removeElement/*, replaceElement*/,\n  ELEMENT_NODE, TEXT_NODE, COMMENT_NODE,\n  V_TEMPLATE_NODE, V_TEXT_NODE, V_FOR_NODE, V_COMPONENT_NODE, V_HTML_NODE, V_SLOT_NODE,\n  V_COMPONENT_IS_NODE\n} from './template'\nimport Transition from './Transition'\nimport {addListener, removeListener, /*isEqualListener, */ListenEventInfo} from './eventListener'\nimport LRU from './lru'\n\n//\nconst OUTPUT_NODEID = false\nconst $INDEX_KEY = '$index'\n\n//\nconst excludeAttributesEx = [\n  /^v-if(|\\..+)$/,\n  /^v-else(|\\..+)$/,\n  /^v-else-if(|\\..+)$/,\n  /^v-for(|\\..+)$/,\n  /^v-text(|\\..+)$/,\n  /^v-html(|\\..+)$/,\n  /^v-model(|\\..+)$/,\n  /^v-show(|\\..+)$/,\n  /^v-style(|\\..+)$/,\n  /^v-once(|\\..+)$/,\n  /^v-pre(|\\..+)$/,\n  /^ref(|\\..+)$/,\n  /^:key(|\\..+)$/,\n  /^:is(|\\..+)$/,\n]\n\nconst isExcludeAttribute = (key: string): boolean => {\n  for(const testKey of excludeAttributesEx){\n    if(testKey.test(key)){\n      return true\n    }\n  }\n  return false\n}\n\n//\nexport class VDomItem extends Transition {\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  // node id\n  public nodeId: string = vid()\n\n  // raw(template) node\n  public rawNode?: Node\n  // VDom instance\n  public vDom!: VDom\n  // parent vDomItem\n  public parent?: VDomItem\n\n  // node type\n  public nodeType: number = COMMENT_NODE\n  // tag name (ELEMENT_NODE)\n  public tagName: string = ''\n  // attributes (ELEMENT_NODE)\n  public attributes: { [key: string]: string } = {}\n  // children items (ELEMENT_NODE)\n  public children: VDomItem[] = []\n\n  // node value (for TEXT_NODE COMMENT_NODE)\n  public nodeValue: string = ''\n\n  // v-for VDomItem\n  public vForVDomItem?: VDomItem\n  // v-for enderd items\n  private vForRenderdItems: { [key: string]: { vDomItem: VDomItem, context: any } } = {}\n  // v-for cache items\n  private vForCacheItems?: LRU<{ vDomItem: VDomItem, context: any }>\n\n  // v-component\n  public vComponent?: any  // tslint:disable-line member-ordering\n  // v-component instance\n  private vComponentInstance?: VDomComponent\n  // v-for cache items\n  private vComponentInstanceCache?: LRU<VDomComponent >\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  // vOutput result\n  public renderd: boolean = false  // tslint:disable-line member-ordering\n  // vOutput result\n  public vOutput?: boolean  // tslint:disable-line member-ordering\n  // transition\n  private lazyTransition: boolean= false  // tslint:disable-line member-ordering\n\n  //////////////////////////////////////////////////////////////////////////////\n  //////////////////////////////////////////////////////////////////////////////\n\n  // real dom elements\n  private elements: Node[] = []\n  // marker element\n  private markerElement!: Node\n  // marker element inserted\n  private markerElementInserted: boolean = false\n  // worker element(v-html, v-style)\n  private vWorkerElement?: Element\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  // attributes (ELEMENT_NODE)\n  private bindAttributes: { [key: string]: string } = {}\n  // rebderd attr\n  private renderdAttributes: { [key: string]: string } = {}\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  // events (ELEMENT_NODE)\n  private bindEvents?: ListenEventInfo[]\n  // @['events'] (ELEMENT_NODE)\n  private bindEventsEx: { [key: string]: ListenEventInfo} = {}\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  // v-model event mounted event\n  private vModelEventsMounted: boolean = false\n  // v-model event info\n  private vModelEventInfo?: ListenEventInfo\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  // update ?\n  private replaceAll: boolean = false\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  // constructor\n  constructor(init?: Partial<VDomItem>) {\n    super()\n    //\n    if (init) {\n      Object.assign(this, init)\n    }\n    // create Marker\n    if (OUTPUT_NODEID) {\n      /* istanbul ignore next */\n      this.markerElement = this.vDom.$document.createComment(`MARKER - ${this.nodeId} ${this.tagName} ${this.nodeType}`)\n    } else {\n      this.markerElement = this.vDom.$document.createTextNode('')\n    }\n    //\n    /* istanbul ignore next */\n    if (!this.vDom) {\n      consoleDebug('INVALID vDom', init)\n      return\n    }\n    //\n    /* istanbul ignore next */\n    if (!this.markerElement) {\n      consoleDebug('INVALID markerElement', init)\n      return\n    }\n    //\n  }\n\n  /* istanbul ignore next */\n  public Public(key: string){\n    const target = (this as any)[key]\n    if(target === undefined){\n      consoleDebug(`VDomItem '${key}' member/method is not implemented`)\n    }\n    if(typeof target === 'function'){\n      return target.bind(this)\n    }\n    return target\n  }\n  //\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  // copy for v-for\n  public clone(): VDomItem {\n    //\n    const result = new VDomItem({\n      vDom: this.vDom,\n      rawNode: this.rawNode,\n      nodeType: this.nodeType,\n      tagName: this.tagName,\n      nodeValue: this.nodeValue,\n      attributes: this.attributes,\n      vForVDomItem: this.vForVDomItem,\n      vComponent: this.vComponent,\n      parent: this.parent,\n    })\n    //\n    for (const child of this.children) {\n      result.children.push(child.clone())\n    }\n    //\n    return result\n    //\n  }\n\n  // umount all\n  public destroy(): void {\n\n    // transition\n    this.umountTransition()\n\n    // v-model\n    if(this.vModelEventInfo !== undefined){\n      removeListener(this.vModelEventInfo)\n      this.vModelEventInfo = undefined\n    }\n\n    // @['event]\n    for (const evKey in this.bindEventsEx) {  // tslint:disable forin\n      removeListener(this.bindEventsEx[evKey])\n    }\n    this.bindEventsEx = {}\n\n    // @event\n    if(this.bindEvents){\n      for (const evInfo of this.bindEvents) {  // tslint:disable forin\n        removeListener(evInfo)\n      }\n      this.bindEvents = undefined\n    }\n\n    // v-for items\n    for (const renderdKey in this.vForRenderdItems) {  // tslint:disable-line forin\n      this.vForRenderdItems[renderdKey].vDomItem.destroy()\n    }\n    this.vForRenderdItems = {}\n\n    // remove v-model\n    if (this.vComponentInstance) {\n      this.vComponentInstance.$destroy()\n    }\n    this.vComponentInstance = undefined\n\n    // remove marker\n    if (this.markerElement) {\n      removeElement(this.markerElement)\n    }\n\n    // remove marker\n    if (this.vWorkerElement) {\n      removeElement(this.vWorkerElement)\n    }\n    this.vWorkerElement = undefined\n\n    // remove elements\n    for (const ele of this.elements) {\n      removeElement(ele)\n    }\n    this.elements = []\n\n    // children\n    for (const child of this.children) {\n      child.destroy()\n    }\n    this.children = []\n\n    //\n    this.vDom.$reactiveVars.umountNodeId(this.nodeId)\n    //\n  }\n\n  // umount\n  public umount(): void {\n    // remove elements\n    for (const ele of this.elements) {\n      removeElement(ele)\n    }\n    //\n  }\n\n  // umount\n  public remount(): void {\n    // mount elements\n    let boforeInsertPos = this.markerElement\n    for (const ele of this.elements) {\n      boforeInsertPos = insertAfter(ele, boforeInsertPos)\n    }\n    //\n  }\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  // render entry point\n  public render(startEle: Node, vPrevDomItem: VDomItem | null, forceUpdate: boolean): Node[] {\n    //\n    if (!this.markerElementInserted) {\n      this.renderMarker(startEle)\n    }\n    //\n    const result = this.renderMain(vPrevDomItem, forceUpdate)\n    this.renderd = true\n    return result\n    //\n  }\n\n  // render marker and HTMLElement\n  private renderMarker(startEle: Node): Node[] {\n\n    //\n    /* istanbul ignore next */\n    if (!this.vDom.$componentId) {\n      consoleDebug('INVALID vDom.$componentId', this)\n      return []\n    }\n\n    //\n    this.markerElementInserted = true\n    insertAfter(this.markerElement, startEle)\n\n    // ELEMENT_NODE\n    if (this.nodeType === ELEMENT_NODE) {\n      // create element\n      let newElement\n      if (this.tagName.toLocaleLowerCase() === 'v-style') {\n        newElement = this.vDom.$document.createElement('style')\n        newElement.type = 'text/css'\n      } else {\n        newElement = this.vDom.$document.createElement(this.tagName)\n      }\n      if ((this.vDom.constructor as any).css) {\n        newElement.setAttribute(this.vDom.$componentId, '')\n      }\n      // create render before point\n      let renderElementBefore: Node\n      if (OUTPUT_NODEID) {\n        /* istanbul ignore next */\n        renderElementBefore = this.vDom.$document.createComment(` *INSERT MARKER* ${this.nodeId} ${this.tagName} ${this.nodeType}`)\n      } else {\n        renderElementBefore = this.vDom.$document.createTextNode('')\n      }\n      newElement.appendChild(renderElementBefore)\n      insertAfter(newElement, this.markerElement)\n\n      // children\n      for (const child of this.children) {\n        const elements = child.renderMarker(renderElementBefore)\n        for (const ele of elements) {\n          renderElementBefore = ele\n        }\n      }\n\n      // result\n      this.elements = [newElement]\n      return this.elements\n      //\n    }\n\n    return [this.markerElement]\n  }\n\n  // render main\n  private renderMain(vPrevDomItem: VDomItem | null = null, forceUpdate: boolean): Node[] {\n    //\n    /* istanbul ignore next */\n    if (!this.markerElement) {\n      consoleDebug('INVALID markerElement', this)\n      return []\n    }\n\n    if(this.renderd && this.attributes['v-once'] !== undefined){\n      return this.elements\n    }\n\n    // force update ?\n    this.replaceAll = forceUpdate\n    // detect update\n    const updateKind = this.vDom.$reactiveVars.updatedElements[this.nodeId]\n    if (updateKind !== CALL_NONE) {\n      this.replaceAll = true\n    }\n    // clear update flag\n    this.vDom.$reactiveVars.updatedElements[this.nodeId] = CALL_NONE\n\n    // transition setup\n    this.lazyTransition = false\n    this.setupTransition()\n    this.resetTransitions()\n\n    // v-if\n    if(!this.vIf(vPrevDomItem)){\n      return []\n    }\n\n    // render targets\n    const outputs = [\n      {nodeType: TEXT_NODE, func: this.TextNode},\n      {nodeType: ELEMENT_NODE, func: this.ElementNode},\n      {nodeType: V_TEMPLATE_NODE, func: this.vTemplate},\n      {nodeType: V_COMPONENT_NODE, func: this.vComponentElement},\n      {nodeType: V_FOR_NODE, func: this.vFor},\n      {nodeType: V_TEXT_NODE, func: this.vText},\n      {nodeType: V_HTML_NODE, func: this.vHtml},\n      {nodeType: V_SLOT_NODE, func: this.vSlot},\n      {nodeType: COMMENT_NODE, func: this.CommentNode},\n      {nodeType: V_COMPONENT_IS_NODE, func: this.vComponentIsElement},\n    ]\n    // render\n    for(const output of outputs){\n      if(this.nodeType === output.nodeType){\n        const result = output.func.bind(this)(forceUpdate)\n        // v-show and transition\n        this.vShow(result)\n        return result\n      }\n    }\n\n    /* istanbul ignore next */\n    consoleDebug('INVALID NODE_TYPE', this)\n    /* istanbul ignore next */\n    return []\n  }\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  // v-if v-pre\n  private vIf(vPrevDomItem: VDomItem | null = null){\n\n    // vOutput\n    let vOutput = this.parseVIf(vPrevDomItem)\n    // v-pre\n    if(this.attributes['v-pre'] !== undefined){\n      vOutput = false\n    }\n\n    // change output status\n    if (this.vOutput !== vOutput) {\n      //\n      this.replaceAll = true\n      //\n      if (vOutput) {\n        //\n        let renderElementBefore = this.markerElement\n        for (const ele of this.elements) {\n          renderElementBefore = insertAfter(ele, renderElementBefore)\n        }\n        if(this.isTransitionTarget()){\n          this.lazyTransition = true\n        }\n        //\n      } else {\n        // vOutput === false\n        if(this.isTransitionTarget() && this.renderd){\n          // w transition\n          this.doTransition(this.elements, false, (eles: Node[]) => {\n            for (const ele of eles) {\n              removeElement(ele)\n            }\n          })\n          //\n        }else{\n          // no transition\n          for (const ele of this.elements) {\n            removeElement(ele)\n          }\n          //\n        }\n        //\n      }\n    }\n    // result\n    this.vOutput = vOutput\n    return vOutput\n    //\n  }\n\n  // v-show and transition\n  private vShow(elements: Node[]){\n\n    //\n    const vShow = this.parseDirective('v-show')\n    if(vShow.value === undefined){\n      if(this.isTransitionTarget() && this.lazyTransition){\n        this.doTransition(elements, true)\n      }\n      return\n    }\n\n    // vShow\n    if(this.nodeType !== ELEMENT_NODE && this.nodeType !== V_COMPONENT_NODE){\n      return\n    }\n\n    //\n    const element = elements[0] as HTMLElement\n    if(vShow.value){\n      // w transition\n      if(element.style.display || !this.renderd){\n        element.style.display = null\n        if(this.isTransitionTarget()/* || this.lazyTransition*/){\n          this.doTransition([element], true)\n        }\n      }\n      //\n    }else{\n      if(element.style.display !== 'none'){\n        if(this.isTransitionTarget() && this.renderd){\n          this.doTransition([element], false, (eles: Node[]) => {\n            for (const ele of eles) {\n              if(ele.nodeType === ELEMENT_NODE){\n                (ele as HTMLElement).style.display = 'none'\n              }\n            }\n          })\n        }else{\n          element.style.display = 'none'\n        }\n      }\n    }\n    //\n  }\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  //\n  private vSlot(forceUpdate: boolean): Node[] {\n\n    // get slot name\n    const slot = this.parseDirective('name', true)\n    let slotName = slot.value\n    if (slotName === undefined) {\n      // default slot\n      slotName = 'default'\n    }\n\n    //\n    let renderd = false\n    const renderdElements: Node[] = []\n\n    //\n    let renderElementBefore = this.markerElement\n    let prevVDomItem: VDomItem | null = null\n\n    // slot exists\n    for (const child of this.vDom.$slotVDomItems) {\n      //\n      /* istanbul ignore next */\n      if (!child.vDom || !child.vDom.$reactiveVars) {\n        consoleDebug('INVALID SLOT child.vDom')\n        consoleDebug('INVALID SLOT child.vDom.$reactiveVars')\n        continue\n      }\n\n      // get slot info\n      const slotInfo = child.parseSlot() || ['default', '']\n      if (slotInfo[0] !== slotName) {\n        continue\n      }\n\n      //\n      renderd = true\n\n      // slot context\n      const vSlotCtx: { [key: string]: any } = {}\n      if (slotInfo[1]) {\n        vSlotCtx[slotInfo[1]] = this.vDom\n      }\n\n      // add slot context\n      child.vDom.$reactiveVars.extContexts(vSlotCtx, () => {\n        // render\n        const elements = child.render(renderElementBefore, prevVDomItem, forceUpdate)\n        for (const ele of elements) {\n          renderdElements.push(ele)\n          renderElementBefore = ele\n        }\n        if (child.nodeType === V_COMPONENT_NODE || child.nodeType === ELEMENT_NODE || child.nodeType === V_TEMPLATE_NODE) {\n          prevVDomItem = child\n        }\n        //\n      })\n\n    }\n\n    // foll back\n    if (!renderd) {\n      prevVDomItem = null\n      for (const child of this.children) {\n        const elements = child.render(renderElementBefore, prevVDomItem, forceUpdate)\n        for (const ele of elements) {\n          renderdElements.push(ele)\n          renderElementBefore = ele\n        }\n        if (child.nodeType === V_COMPONENT_NODE || child.nodeType === ELEMENT_NODE || child.nodeType === V_TEMPLATE_NODE) {\n          prevVDomItem = child\n        }\n      }\n    }\n\n    // result\n    this.elements = renderdElements\n    return this.elements\n  }\n\n  //\n  private vComponentImplElement(vComponent: any, componentIs: boolean, forceUpdate: boolean): Node[] {\n    //\n    /* istanbul ignore next */\n    if(!(this.vDom.constructor as any).components){\n      consoleWarn('VDom no components impl', this)\n      return []\n    }\n\n    // no rerender\n    if (!forceUpdate && !this.replaceAll) {\n      if (this.vComponentInstance) {\n        this.vComponentInstance.$render(false, (vDom: VDom, updateedEle: Node) => {\n          this.elements = [updateedEle]\n        })\n      }\n      return this.elements\n    }\n\n    //\n    if(this.vComponentInstanceCache === undefined){\n      this.vComponentInstanceCache = new LRU({\n        max: this.vDom.$maxComponentCache,\n        dispose: (key: string, n: VDomComponent) => {n.$destroy()}\n      })\n    }\n\n    //\n    const componentName = vComponent.name\n    // conponent :is\n    if(componentIs){\n      // get cache\n      const cachedComponentInstance = this.vComponentInstanceCache.get(componentName)\n      //\n      if(cachedComponentInstance !== this.vComponentInstance){\n        if(this.vComponentInstance){\n          this.vComponentInstance.$umount()\n        }\n        this.vComponentInstance = cachedComponentInstance\n        if(this.vComponentInstance){\n          this.vComponentInstance.$remount()\n        }\n      }\n      //\n    }\n\n    // create new\n    if(!this.vComponentInstance){\n      //\n      this.vComponentInstance = new vComponent()\n      if (this.vComponentInstance) {\n        //\n        this.vComponentInstanceCache.set(componentName, this.vComponentInstance)\n\n        // copy slot content\n        for (const child of this.children) {\n          this.vComponentInstance.$slotVDomItems.push(child.clone())\n        }\n\n        // $root $parent $instanceId\n        if (this.parent && this.parent.vDom) {\n          this.vComponentInstance.$root = this.parent.vDom.$root\n          this.vComponentInstance.$parent = this.parent.vDom\n          this.vComponentInstance.$instanceId = this.parent.vDom.$instanceId\n        }\n\n        // inject component params\n        const vAttributesFirst = this.parseAttributes(true, true)\n        for (const key in vAttributesFirst) { // tslint:disable-line forin\n          //\n          // if(this.vComponentInstance.$props[key] !== undefined){\n          if(key in this.vComponentInstance.$props){\n            this.vComponentInstance.$props[key] = vAttributesFirst[key]\n            ;(this.vComponentInstance as any)[key] = vAttributesFirst[key]\n          }else{\n            /* istanbul ignore next */\n            if(key !== 'class' && key !== 'style'){\n              consoleWarn(`VDom invalid component property '${this.vComponentInstance.constructor.name}.${key}'`, this.rawNode)\n            }\n          }\n          //\n        }\n\n        // mount real dom\n        this.vComponentInstance.$mountAfter(this.markerElement, (vDom: VDom, createdEle: Node) => {\n\n          //\n          this.elements = [createdEle]\n\n          // set parent component id\n          if (this.parent && this.parent.vDom && this.parent.vDom.$componentId && (this.parent.vDom.constructor as any).css) {\n            (createdEle as Element).setAttribute(this.parent.vDom.$componentId, '')\n          }\n          // do dorevtives\n          this.doDirective(createdEle as Element, this.vComponentInstance)\n\n          // set $refs\n          const ref = this.parseDirective('ref', true)\n          if (ref.value && this.vComponentInstance) {\n            this.vDom.$refs[ref.value] = this.vComponentInstance\n            this.vDom.$vrefs[ref.value] = this\n          }\n          //\n        })\n        //\n      }\n      //\n      return this.elements\n      //\n    }else{\n\n      // inject component params\n      const vAttributes = this.parseAttributes(true, true)\n      for (const key in vAttributes) { // tslint:disable-line forin\n        // if(this.vComponentInstance.$props[key] !== undefined){\n        if(key in this.vComponentInstance.$props){\n          this.vComponentInstance.$props[key] = vAttributes[key]\n          ;(this.vComponentInstance as any)[key] = vAttributes[key]\n        }\n      }\n\n      // do dorevtives\n      const targetElement = this.elements[0] as Element\n      this.doDirective(targetElement, this.vComponentInstance)\n\n      // render request\n      const element = this.vComponentInstance.$render(false, () => {})\n      if (element) {\n        this.elements = [element]\n      }\n\n      // result\n      return this.elements\n      //\n    }\n\n    //\n  }\n\n  //\n  private vComponentIsElement(forceUpdate: boolean): Node[] {\n    //\n    /* istanbul ignore next */\n    if(!(this.vDom.constructor as any).components){\n      consoleWarn('VDom no components impl', this)\n      return []\n    }\n    //\n    const componentName = this.parseDirective(':is')\n    /* istanbul ignore next */\n    //\n    if(!componentName.value){\n      consoleWarn(`VDom invalid component :is='${this.attributes[':is']}'`/*, this*/)\n      return []\n    }\n    //\n    const vComponent = (this.vDom.constructor as any).components[componentName.value]\n    /* istanbul ignore next */\n    if(!vComponent){\n      consoleWarn(`VDom no component '${this.attributes[':is']}'`, this)\n      return []\n    }\n    return this.vComponentImplElement(vComponent, true, forceUpdate)\n  }\n\n  //\n  private vComponentElement(forceUpdate: boolean): Node[] {\n    //\n    /* istanbul ignore next */\n    if (!this.vComponent) {\n      consoleDebug('INVALID vComponent', this)\n      return []\n    }\n    //\n    return this.vComponentImplElement(this.vComponent, false, forceUpdate)\n    //\n  }\n\n  //\n  private vFor(forceUpdate: boolean): Node[] {\n    //\n    /* istanbul ignore next */\n    if (!this.vForVDomItem) {\n      consoleDebug('INVALID vForVDomItem', this)\n      return []\n    }\n\n    // get v-for info\n    const vForInfo = this.parseVFor()\n    /* istanbul ignore next */\n    if (!vForInfo) {\n      consoleDebug('INVALID vForInfo', this)\n      return []\n    }\n\n    if(this.vForCacheItems === undefined){\n      this.vForCacheItems = new LRU({\n        max: this.vDom.$maxCache,\n      })\n    }\n\n    //\n    let beforeElement: Node = this.markerElement\n    const renderdElements: Node[] = []\n\n    // no rerender\n    if (!forceUpdate && !this.replaceAll) {\n      //\n      for (const key in this.vForRenderdItems) {  // tslint:disable-line forin\n\n        // set v-for context\n        const vForVDomItem = this.vForRenderdItems[key]\n        this.vDom.$reactiveVars.extContexts(vForVDomItem.context, () => {\n          // render\n          const elements = vForVDomItem.vDomItem.render(beforeElement, null, forceUpdate)\n          for (const ele of elements) {\n            renderdElements.push(ele)\n            beforeElement = ele\n          }\n        })\n        //\n      }\n      // result\n      this.elements = renderdElements\n      return this.elements\n      //\n    }\n\n    // v-for context\n    let object = this.vDom.$reactiveVars.eval(this, CALL_FUNCS, vForInfo.data, true)\n    /* istanbul ignore next */\n    if (object === undefined) {\n      consoleDebug('INVALID v-for context', this)\n      return []\n    }\n\n    //\n    // console.log(\"CONTEXT OBJECT\", JSON.stringify(object))\n\n    // is Integer for ?\n    if (Number.isInteger(object)) {\n      const workObject: number[] = []\n      if (object > 0) {\n        for (let i = 0; i < object; i++) {\n          workObject.push(i)\n        }\n      }\n      object = workObject\n    }\n\n    // index\n    let $indexkey = 0\n\n    // copy cache\n    const vForRenderdItems = Object.assign({}, this.vForRenderdItems)\n    // and clear cache store\n    this.vForRenderdItems = {}\n\n    // v-for context keys\n    const vForContextKeys = Object.keys(object)\n    for (const key of vForContextKeys) {\n      //\n      const vForContext: { [key: string]: any } = {}\n\n      // set context values\n      if (vForInfo.index.length > 0) {\n        vForContext[vForInfo.index[0]] = $indexkey\n      }\n      if (vForInfo.index.length > 1) {\n        vForContext[vForInfo.index[1]] = object[key]\n      }\n      //\n      if (vForInfo.index.length > 2) {\n        vForContext[vForInfo.index[2]] = key\n      }\n      if (vForInfo.index.length > 3) {\n        vForContext[vForInfo.index[3]] = $indexkey\n      }\n      ++$indexkey\n      //\n      // console.log(\"CONTEXT\", vForContext)\n\n      // set v-for context\n      this.vDom.$reactiveVars.extContexts(vForContext, () => {\n\n        /* istanbul ignore next */\n        if(this.vForCacheItems === undefined){\n          consoleDebug('INVALID vForCacheItems', this)\n          return\n        }\n        /* istanbul ignore next */\n        if(this.vForVDomItem === undefined){\n          consoleDebug('INVALID vForVDomItem', this)\n          return\n        }\n\n        // operation target vDom\n        let vForVDom\n        // child key\n        let vChildKey = this.parseKey()\n\n        // operation target vDom\n        const vCachedVDomItem = this.vForCacheItems.get(vChildKey)\n        if (vCachedVDomItem === undefined) {\n          //\n          // create new vDomItem\n          vForVDom = this.vForVDomItem.clone()\n          const elements = vForVDom.render(beforeElement, null, true)\n          for (const ele of elements) {\n            renderdElements.push(ele)\n            beforeElement = ele\n          }\n          // cache\n          this.vForCacheItems.set(vChildKey, {vDomItem: vForVDom, context: vForContext })\n\n          //\n        } else {\n          //\n          vForVDom = vCachedVDomItem.vDomItem\n\n          // insert marker\n          beforeElement = insertAfter(vForVDom.markerElement, beforeElement)\n          // remount\n          vForVDom.remount()\n\n          // render\n          const elements = vForVDom.render(beforeElement, null, true)\n          for (const ele of elements) {\n            renderdElements.push(ele)\n            beforeElement = ele\n          }\n\n          // remove renderd\n          delete vForRenderdItems[vChildKey]\n        }\n\n        // save renderd\n        /* istanbul ignore next */\n        if (this.vForRenderdItems[vChildKey]) {\n          consoleWarn(`VDom duplicate keys detected \"${vChildKey}\"`, this.rawNode)\n          vChildKey = vid()\n        }\n        this.vForRenderdItems[vChildKey] = { vDomItem: vForVDom, context: Object.assign({}, vForContext) }\n\n      })\n      //\n    }\n\n    // clear unused vDomItem\n    for (const renderdKey in vForRenderdItems) {  // tslint:disable-line forin\n      const tgtVDomItem = vForRenderdItems[renderdKey].vDomItem\n      tgtVDomItem.umount()\n      const onCache = this.vForCacheItems.get(renderdKey)\n      if(onCache === undefined){\n        tgtVDomItem.destroy()\n      }\n    }\n\n    // set $refs\n    const ref = this.parseDirective('ref', true)\n    if (ref.value) {\n      //\n      this.vDom.$refs[ref.value] = []\n      for(const key in this.vForRenderdItems){\n        if(this.vForRenderdItems[key].vDomItem.nodeType === V_COMPONENT_IS_NODE || this.vForRenderdItems[key].vDomItem.nodeType === V_COMPONENT_NODE){\n          this.vDom.$refs[ref.value].push(this.vForRenderdItems[key].vDomItem.vComponentInstance)\n        }else{\n          this.vDom.$refs[ref.value].push(this.vForRenderdItems[key].vDomItem.elements[0])\n        }\n      }\n      //\n      this.vDom.$vrefs[ref.value] = this\n      //\n    }\n\n    // result\n    this.elements = renderdElements\n    return this.elements\n    //\n  }\n\n  //\n  private CommentNode(forceUpdate: boolean): Node[] {\n    //\n    // no rerender\n    if (!forceUpdate && !this.replaceAll) {\n      return this.elements\n    }\n    //\n    let targetElement: Comment\n    if (this.elements.length === 0) {\n      targetElement = this.vDom.$document.createComment(this.nodeValue)\n      insertAfter(targetElement, this.markerElement)\n      //\n      this.elements = [targetElement]\n      //\n    } else {\n      targetElement = this.elements[0] as Comment\n      insertAfter(targetElement, this.markerElement)\n      const oldData = targetElement.data\n      if (oldData !== this.nodeValue) {\n        targetElement.data = this.nodeValue\n      }\n      //\n    }\n    //\n    return this.elements\n    //\n  }\n\n  //\n  private TextNode(forceUpdate: boolean): Node[] {\n    //\n    // no rerender\n    if (!forceUpdate && !this.replaceAll) {\n      return this.elements\n    }\n\n    // output value\n    const value = this.nodeValue\n\n    // render\n    let targetElement\n    if (this.elements.length === 0) {\n      // create new text node\n      targetElement = this.vDom.$document.createTextNode(value)\n      insertAfter(targetElement, this.markerElement)\n      this.elements = [targetElement]\n      //\n    } else {\n      // update text node\n      targetElement = this.elements[0]\n      insertAfter(targetElement, this.markerElement)\n      const oldData = (targetElement as Text).data\n      if (oldData !== value) {\n        (targetElement as Text).data = value\n      }\n      //\n    }\n\n    // result\n    return this.elements\n    //\n  }\n\n  //\n  private vHtml(forceUpdate: boolean): Node[] {\n\n    // no rerender\n    if (!forceUpdate && !this.replaceAll) {\n      return this.elements\n    }\n\n    // output value\n    const html = this.parseDirective('v-html')\n    let value = html.value\n    if (value === undefined) {\n      value = ''\n    }\n\n    // create worker element\n    this.vWorkerElement = this.vWorkerElement || this.vDom.$document.createElement('div')\n\n    // import html\n    this.vWorkerElement.innerHTML = value\n\n    // remove old elements\n    for (const ele of this.elements) {\n      removeElement(ele)\n    }\n    this.elements = []\n\n    // render\n    let beforeElement = this.markerElement\n    const length = this.vWorkerElement.childNodes.length\n    for (let i = 0; i < length; i++) {  // tslint:disable-line prefer-for-of\n      const node = this.vWorkerElement.childNodes[0]\n      beforeElement = insertAfter(node, beforeElement)\n      this.elements.push(node)\n    }\n\n    // result\n    return this.elements\n    //\n  }\n\n  //\n  private vText(forceUpdate: boolean): Node[] {\n\n    // no rereder\n    if (!forceUpdate && !this.replaceAll) {\n      return this.elements\n    }\n\n    // output value\n    const text = this.parseDirective('v-text')\n    let value = text.value\n    if (value === undefined) {\n      value = ''\n    }\n\n    // render\n    let targetElement: Text\n    if (this.elements.length === 0) {\n      // create new node\n      targetElement = this.vDom.$document.createTextNode(value)\n      insertAfter(targetElement, this.markerElement)\n      this.elements = [targetElement]\n    } else {\n      // update node\n      targetElement = this.elements[0] as Text\n      const oldData = targetElement.data\n      if (oldData !== value) {\n        targetElement.data = value\n      }\n    }\n\n    // result\n    return this.elements\n    //\n  }\n\n  //\n  private ElementNode(forceUpdate: boolean): Node[] {\n    //\n    /* istanbul ignore next */\n    if (!this.elements[0].firstChild) {\n      consoleDebug('INVALID this.elements[0].firstChild', this)\n      return []\n    }\n\n    // target\n    const targetElement = this.elements[0] as Element\n    let renderElementBefore: Node = this.elements[0].firstChild\n\n    // children\n    let prevVDomItem = null\n    for (const child of this.children) {\n      const elements = child.render(renderElementBefore, prevVDomItem, forceUpdate)\n      for (const ele of elements) {\n        renderElementBefore = ele\n      }\n      if (child.nodeType === V_COMPONENT_NODE || child.nodeType === ELEMENT_NODE || child.nodeType === V_TEMPLATE_NODE) {\n        prevVDomItem = child\n      }\n    }\n\n    // event mount\n    if (!forceUpdate && !this.replaceAll) {\n      return this.elements\n    }\n\n    // do directives\n    this.doDirective(targetElement)\n\n    // set $refs\n    const ref = this.parseDirective('ref', true)\n    if (ref.value) {\n      this.vDom.$refs[ref.value] = targetElement\n      this.vDom.$vrefs[ref.value] = this\n    }\n\n    // result\n    return this.elements\n    //\n  }\n\n  //\n  private vTemplate(forceUpdate: boolean): Node[] {\n\n    // render before pos\n    let renderElementBefore: Node = this.markerElement\n\n    // renderd elements\n    const renderdElements = []\n\n    // render\n    let prevVDomItem = null\n    for (const child of this.children) {\n      const elements = child.render(renderElementBefore, prevVDomItem, forceUpdate)\n      for (const ele of elements) {\n        renderdElements.push(ele)\n        renderElementBefore = ele\n      }\n      if (child.nodeType === V_COMPONENT_NODE || child.nodeType === ELEMENT_NODE || child.nodeType === V_TEMPLATE_NODE) {\n        prevVDomItem = child\n      }\n    }\n\n    // result\n    this.elements = renderdElements\n    return this.elements\n    //\n  }\n\n  ////////////////////////////////////////////////////////////////////////////\n\n  // do dorective\n  private doDirective(element: Element, exclude?: any) {\n    // attr= :attr=\n    this.directiveAttributes(element, exclude)\n    // v-mode\n    this.directiveVModel(element)\n    // @event\n    this.directiveEvent(element)\n    // @['event']\n    this.directiveEventEx(element)\n    // ext directive\n    this.doExtDirective(element)\n    //\n  }\n\n  ////////////////////////////////////////////////////////////////////////////\n\n  //\n  private extDirectives() {\n    return Object.keys(this.vDom.$root.$customDirectives)\n  }\n\n  //\n  private doExtDirective(element: Element) {\n    //\n    const directives = Object.keys(this.vDom.$root.$customDirectives)\n    for (const vName of directives) {\n      if (this.attributes[vName]) {\n        const value = this.vDom.$reactiveVars.eval(this, CALL_FUNCS, this.attributes[vName], true)\n        this.vDom.$root.$customDirectives[vName](element, { name: vName, value, expression: this.attributes[vName] }, this)\n      }\n    }\n    //\n  }\n\n  //////////////////////////////////////////////////////////////////////////////\n\n  //\n  public directiveVModel(element: Element) {  // tslint:disable-line member-ordering\n\n    //\n    const vModel = this.parseDirective('v-model', true)\n    const model = vModel.value\n    const option = vModel.option\n    //\n    if (model === undefined || option === undefined) {\n      return\n    }\n\n    //\n    const value = this.vDom.$reactiveVars.eval(this, CALL_FUNCS, model, true)\n\n    //\n    if (this.tagName === 'INPUT') {\n      //\n      const inputEle = element as HTMLInputElement\n      //\n      if (this.attributes.type === 'checkbox') {\n        if (typeof value === 'boolean') {\n          //\n          inputEle.checked = value\n          //\n          if (!this.vModelEventsMounted) {\n            this.vModelEventsMounted = true\n            const eventFunc = () => {\n              (this as any).vDom[model] = inputEle.checked\n            }\n            this.vModelEventInfo = addListener(element, 'change', eventFunc, eventFunc)\n          }\n          //\n        } else {\n          //\n          if (value.indexOf(this.attributes.value) >= 0) {\n            inputEle.checked = true\n          } else {\n            inputEle.checked = false\n          }\n          //\n          if (!this.vModelEventsMounted) {\n            this.vModelEventsMounted = true\n            const eventFunc = () => {\n              if (inputEle.checked) {\n                if ((this as any).vDom[model].indexOf(this.attributes.value) < 0) {\n                  (this as any).vDom[model].push(this.attributes.value)\n                }\n              } else {\n                (this as any).vDom[model] = (this as any).vDom[model].filter((item: string) => item !== this.attributes.value)\n              }\n            }\n            this.vModelEventInfo = addListener(element, 'change', eventFunc, eventFunc)\n          }\n          //\n        }\n      } else if (this.attributes.type === 'radio') {\n        //\n        if (value === this.attributes.value) {\n          inputEle.checked = true\n        } else {\n          inputEle.checked = false\n        }\n        //\n        if (!this.vModelEventsMounted) {\n          this.vModelEventsMounted = true\n          const eventFunc = () => {\n            (this as any).vDom[model] = inputEle.value\n          }\n          this.vModelEventInfo = addListener(element, 'change', eventFunc, eventFunc)\n        }\n        //\n      } else {\n        //\n        if(option.indexOf('number') >= 0){\n          const outVal = parseFloat(value)\n          if(Number.isNaN(outVal)){\n            consoleWarn(`VDom invalid input value(only number) '${model}'`, this.rawNode)\n            inputEle.value = ''\n          }else{\n            inputEle.value = String(outVal)\n          }\n        }else{\n          inputEle.value = value\n        }\n        //\n        if (!this.vModelEventsMounted) {\n          this.vModelEventsMounted = true\n          //\n          let isLazy = false\n          if(option.indexOf('lazy') >= 0){\n            isLazy = true\n          }\n          //\n          let isTrim = false\n          if(option.indexOf('trim') >= 0){\n            isTrim = true\n          }\n          //\n          const eventFunc = () => {\n            if(option.indexOf('number') >= 0){\n              const outVal = parseFloat(inputEle.value)\n              if(Number.isNaN(outVal)){\n                consoleWarn(`VDom invalid input value(only number) '${model}'`, this.rawNode)\n                ;(this as any).vDom[model] = ''\n              }else{\n                (this as any).vDom[model] = outVal\n              }\n            }else{\n              (this as any).vDom[model] = isTrim?inputEle.value.trim():inputEle.value\n            }\n          }\n          this.vModelEventInfo = addListener(element, isLazy?'change':'input', eventFunc, eventFunc)\n        }\n        //\n      }\n      //\n      return\n      //\n    }\n\n    //\n    if (this.tagName === 'TEXTAREA') {\n      //\n      const textAreaEle = element as HTMLTextAreaElement\n      textAreaEle.value = value\n      //\n      if (!this.vModelEventsMounted) {\n        this.vModelEventsMounted = true\n        const eventFunc = () => {\n          (this as any).vDom[model] = textAreaEle.value\n        }\n        this.vModelEventInfo = addListener(element, 'input', eventFunc, eventFunc)\n      }\n      //\n      return\n      //\n    }\n\n    //\n    if (this.tagName === 'SELECT') {\n      //\n      const selectEle = element as HTMLSelectElement\n      //\n      if (this.attributes.multiple !== undefined) {\n        //\n        for (let i = 0; i < selectEle.options.length; i++) {  // tslint:disable-line prefer-for-of\n          if (value.indexOf(selectEle.options[i].value) >= 0) {\n            selectEle.options[i].selected = true\n          } else {\n            selectEle.options[i].selected = false\n          }\n        }\n        //\n        if (!this.vModelEventsMounted) {\n          this.vModelEventsMounted = true\n          const eventFunc = () => {\n            //\n            for (let i = 0; i < selectEle.options.length; i++) {  // tslint:disable-line prefer-for-of\n              //\n              const tgtValue = selectEle.options[i].value\n              //\n              if (selectEle.options[i].selected) {\n                if ((this as any).vDom[model].indexOf(tgtValue) < 0) {\n                  (this as any).vDom[model].push(tgtValue)\n                }\n              } else {\n                (this as any).vDom[model] = (this as any).vDom[model].filter((item: string) => item !== tgtValue)\n              }\n            }\n            //\n          }\n          this.vModelEventInfo = addListener(element, 'change', eventFunc, eventFunc)\n        }\n        //\n      } else {\n        //\n        for (let i = 0; i < selectEle.options.length; i++) {  // tslint:disable-line prefer-for-of\n          if (selectEle.options[i].value === value) {\n            selectEle.selectedIndex = i\n            break\n          }\n        }\n        //\n        if (!this.vModelEventsMounted) {\n          this.vModelEventsMounted = true\n          const eventFunc = () => {\n            (this as any).vDom[model] = selectEle.options[selectEle.selectedIndex].value\n          }\n          this.vModelEventInfo = addListener(element, 'change', eventFunc, eventFunc)\n        }\n        //\n      }\n      //\n      return\n      //\n    }\n    //\n  }\n\n  //\n  public directiveAttributes(element: Element, component?: VDom) {  // tslint:disable-line member-ordering\n\n    //\n    const vAttributes = this.parseAttributes(false)\n\n    if(component && component.$rootVDom){\n      // merge attributes\n      for(const cmpKey in component.$rootVDom.renderdAttributes){ // tslint:disable-line forin\n        //\n        vAttributes[cmpKey] = vAttributes[cmpKey] || ''\n        //\n        if(cmpKey === 'class' || cmpKey === 'style'){\n          vAttributes[cmpKey] += ' ' + (component.$rootVDom.renderdAttributes[cmpKey] || '')\n        }else{\n          vAttributes[cmpKey] = component.$rootVDom.renderdAttributes[cmpKey]\n        }\n        //\n        vAttributes[cmpKey] = vAttributes[cmpKey].trim()\n        //\n      }\n    }\n\n    //\n    this.renderdAttributes = {}\n    //\n    for (const key in vAttributes) {  // tslint:disable-line forin\n      //\n      if(component){\n        if(key in component.$props || key in (component as any)){\n          continue\n        }\n      }\n      //\n      if (key.substr(0, 1) === '[' && key.substr(key.length - 1, 1) === ']') {\n        // :['bindname']\n        if (this.bindAttributes[key]) {\n          element.removeAttribute(this.bindAttributes[key])\n        }\n        //\n        const exKey = this.vDom.$reactiveVars.eval(this, CALL_FUNCS, key.substr(1, key.length - 2), false)\n        if (!isExcludeAttribute(exKey) && this.extDirectives().indexOf(exKey) < 0) {\n          element.setAttribute(exKey, vAttributes[key])\n          this.renderdAttributes[exKey] = vAttributes[key]\n          this.bindAttributes[key] = exKey\n        }\n      } else {\n        // :bindname\n        if (!isExcludeAttribute(key) && this.extDirectives().indexOf(key) < 0) {\n          element.setAttribute(key, vAttributes[key])\n          this.renderdAttributes[key] = vAttributes[key]\n        }\n        //\n      }\n      //\n    }\n\n  }\n\n  //\n  private addEvent(key: string, eventDef: {value: string, option: any} ,element: Element): ListenEventInfo {  // tslint:disable-line member-ordering\n\n    // event option\n    const option = eventDef.option\n\n    //\n    // console.log(\"ADD EVENT !!!\", key)\n\n    //\n    const eventFunc = (ev: any) => {\n\n      //\n      // console.log(\"FIRE EVENT !!!\", ev)\n      //\n      if (this.vDom && this.vDom.$reactiveVars) {\n        //\n        if(option.indexOf('self') >= 0){ if (ev.target !== ev.currentTarget){return}}\n        //\n        if(option.indexOf('enter') >= 0){if (ev.keyCode !== 13){ return}}\n        if(option.indexOf('ctrl') >= 0){if (!ev.ctrlKey){ return}}\n        if(option.indexOf('alt') >= 0){if (!ev.altKey){ return}}\n        if(option.indexOf('shift') >= 0){if (!ev.shiftKey){ return}}\n        if(option.indexOf('meta') >= 0){if (!ev.metaKey){ return}}\n        //\n        if(option.indexOf('left') >= 0){if (ev.button !== 0){ return}}\n        if(option.indexOf('right') >= 0){if (ev.button !== 2){ return}}\n        if(option.indexOf('middle') >= 0){if (ev.button !== 1){ return}}\n        //\n        const $event = (ev instanceof CustomEvent)? ev.detail: ev\n        this.vDom.$reactiveVars.extContexts({$event}, () => {\n          this.vDom.$reactiveVars.eval(this, CALL_EVENT_HANDLER, eventDef.value, true, [$event])\n        })\n        //\n        if(option.indexOf('stop') >= 0){ev.stopPropagation()}\n        if(option.indexOf('prevent') >= 0){ev.preventDefault()}\n        //\n      }\n    }\n    //\n    let captureMode = false\n    if(option.indexOf('capture') >= 0){captureMode = true}\n    let onceMode = false\n    if(option.indexOf('once') >= 0){onceMode = true}\n    let passiveMode = false\n    if(option.indexOf('passive') >= 0){passiveMode = true}\n    //\n    const eventOption = {\n      capture: captureMode,\n      once: onceMode,\n      passive: passiveMode\n    }\n    //\n    return addListener(element, key, eventFunc, eventFunc.bind(this), eventOption)\n    //\n  }\n\n  // @['eventname]\n  public directiveEventEx(element: Element) {  // tslint:disable-line member-ordering\n\n    // remove old events\n    for (const evKey in this.bindEventsEx) {  // tslint:disable forin\n      removeListener(this.bindEventsEx[evKey])\n    }\n    this.bindEventsEx = {}\n\n    //\n    const vEvents = this.parseEvents()\n    for (const key in vEvents) {  // tslint:disable-line forin\n      if (key.substr(0, 1) === '[' && key.substr(key.length - 1, 1) === ']') {\n        //\n        if (this.bindAttributes[key]) {\n          element.removeAttribute(this.bindAttributes[key])\n        }\n        const eventKey = this.vDom.$reactiveVars.eval(this, CALL_FUNCS, key.substr(1, key.length - 2), false)\n        //\n        const bindEventInfo = this.addEvent(eventKey, vEvents[key], element)\n        if(bindEventInfo){\n          this.bindEventsEx[eventKey] = bindEventInfo\n        }\n        //\n      }\n    }\n    //\n  }\n\n  // @eventname\n  public directiveEvent(element: Element) {  // tslint:disable-line member-ordering\n    //\n    if(this.bindEvents !== undefined){\n      return\n    }\n    this.bindEvents = []\n\n    //\n    const vEvents = this.parseEvents()\n    for (const key in vEvents) {  // tslint:disable-line forin\n      if (key.substr(0, 1) === '[' && key.substr(key.length - 1, 1) === ']') {\n        continue\n      }\n      const eleInfo = this.addEvent(key, vEvents[key], element)\n      this.bindEvents.push(eleInfo)\n    }\n    //\n  }\n\n  //////////////////////////////////////////////////////////////////////////////\n  //\n  private parseVIf(prevVDomItem: VDomItem | null): boolean {\n\n    //\n    let vIf: boolean | undefined\n      //\n    if (this.attributes['v-if'] !== undefined) {\n      vIf = !!(this.vDom.$reactiveVars.eval(this, CALL_FUNCS, this.attributes['v-if'], true))\n    }\n    /*\n    if (this.attributes['v-else-if'] !== undefined) {\n      if (prevVDomItem) {\n        if (prevVDomItem.vOutput === true) {\n          vIf = false\n        }\n        if (prevVDomItem.vOutput === false) {\n          vIf = this.vDom.$reactiveVars.eval(this, CALL_FUNCS, this.attributes[key], true)\n        }\n      }\n      break\n    }\n    */\n    if (this.attributes['v-else'] !== undefined) {\n      if (prevVDomItem) {\n        if (prevVDomItem.vOutput === true) {\n          vIf = false\n        }\n        if (prevVDomItem.vOutput === false) {\n          vIf = true\n        }\n      }\n    }\n    //\n    if (vIf === undefined) {\n      return true\n    }\n    //\n    return vIf\n    //\n  }\n\n  //\n  public parseEvents(): { [key: string]: {value: string, option: string[]} } {  // tslint:disable-line member-ordering\n    //\n    const vEvents: { [key: string]: {value: string, option: string[]} } = {}\n    //\n    for (const key in this.attributes) {\n      if (key.substr(0, 1) === '@') {\n        const outEvents = key.substr(1).split('.')\n        vEvents[outEvents[0]] = {value: this.attributes[key], option: outEvents}\n        continue\n      }\n    }\n    //\n    return vEvents\n    //\n  }\n\n  //\n  private parseAttributes(raw: boolean, vBindOnly: boolean = false): { [key: string]: string } {\n\n    //\n    const vAttributes: { [key: string]: string } = {}\n    //\n    for (const key in this.attributes) {\n      //\n      if (key.substr(0, 1) === '@') {continue}\n      if (key.substr(0, 1) === '#') {continue}\n      if (isExcludeAttribute(key)) {continue}\n      if (this.extDirectives().indexOf(key) >= 0) {continue}\n\n      // :attr=\n      if (key.substr(0, 1) === ':') {\n        const outKey = key.substr(1)\n        //\n        let vOut = ''\n        if (outKey === 'class') {\n          //\n          const v = this.vDom.$reactiveVars.eval(this, CALL_FUNCS, this.attributes[key], true)\n          if (Array.isArray(v)) {\n            for (const cKey of v) {\n              vOut += `${cKey} `\n            }\n          } else if (typeof v === 'object') {\n            for (const cKey in v) { // tslint:disable-line forin\n              if(v[cKey]){\n                vOut += `${cKey} `\n              }\n            }\n          } else {\n            vOut = v\n          }\n          //\n        } else if (outKey === 'style') {\n          //\n          const v = this.vDom.$reactiveVars.eval(this, CALL_FUNCS, this.attributes[key], true)\n          if (Array.isArray(v)) {\n            for (const cStyle of v) {\n              for (const cKey in cStyle) { // tslint:disable-line forin\n                vOut += `${cKey}: ${cStyle[cKey]}; `\n              }\n            }\n          } else if (typeof v === 'object') {\n            for (const cKey in v) { // tslint:disable-line forin\n              vOut += `${cKey}: ${v[cKey]}; `\n            }\n          } else {\n            vOut = v\n          }\n          //\n        } else {\n          vOut = this.vDom.$reactiveVars.eval(this, CALL_FUNCS, this.attributes[key], true)\n        }\n        //\n        if(raw){\n          vAttributes[outKey] = vOut\n        }else{\n          let vOutStr = ''\n          try {\n            vOutStr = String(vOut).trim()\n          } catch (e) {\n            /* istanbul ignore next */\n            consoleWarn(`VDom can't convert to string`, vOut)   // TypeError!\n          }\n          if (!vAttributes[outKey]) {\n            vAttributes[outKey] = vOutStr\n          } else {\n            vAttributes[outKey] += ' ' + vOutStr\n          }\n        }\n        //\n        continue\n      }\n\n      // attr=\n      if (!vBindOnly) {\n        let vStaticStr = ''\n        try {\n          vStaticStr = String(this.attributes[key]).trim()\n        } catch (e) {\n          /* istanbul ignore next */\n          consoleWarn(`VDom can't convert to string`, this.attributes[key])   // TypeError!\n        }\n        if (!vAttributes[key]) {\n          vAttributes[key] = vStaticStr\n        } else {\n          vAttributes[key] += ' ' + vStaticStr\n        }\n      }\n\n      //\n    }\n\n    //\n    return vAttributes\n\n  }\n\n  //\n  private parseVFor(): { index: string[], data: string } | undefined {\n    //\n    /* istanbul ignore next */\n    if (!this.attributes['v-for']) {\n      consoleDebug('INVALID v-for attributes', this)\n      return undefined\n    }\n    //\n    const vF = this.attributes['v-for']\n    //\n    const pos = vF.indexOf(' in ')\n    if (pos < 0) {\n      return { index: [$INDEX_KEY], data: vF }\n    }\n    //\n    let index = vF.substr(0, pos).trim()\n    if (index.substr(0, 1) === '(') {\n      index = index.substr(1, index.length - 2)\n    }\n    index = `${$INDEX_KEY},${index}`\n    //\n    index.split(',').map(item => item.trim())\n    //\n    return { index: index.split(',').map(item => item.trim()), data: vF.substr(pos + 4).trim() }\n    //\n  }\n\n  //\n  private parseKey(): string {\n    //\n    this.attributes[':key'] = this.attributes[':key'] || $INDEX_KEY\n    const appendKey = this.vDom.$reactiveVars.eval(this, CALL_FUNCS, this.attributes[':key'], false)\n    /* istanbul ignore next */\n    if (appendKey === undefined) {\n      return this.nodeId\n    }\n    //\n    return this.nodeId + '-' + appendKey\n  }\n\n  //\n  private parseDirective(directive: string, noEval: boolean = false): {value?: string, option?: string[]} {\n    //\n    let key\n    let value\n    for (const attrKey in this.attributes) {\n      if (attrKey === directive || attrKey.substr(0, directive.length + 1) === `${directive}.`) {\n        key = attrKey\n        value = this.attributes[attrKey]\n        break\n      }\n    }\n    //\n    if(!key || !value){\n      return {}\n    }\n\n    //\n    const directives = key.split('.')\n    if (noEval) {\n      return {value, option: directives} // tslint:disable-line no-string-literal\n    }\n    return {value: this.vDom.$reactiveVars.eval(this, CALL_FUNCS, value, true), option: directives}\n    //\n  }\n\n  //\n  private parseSlot(): [string, string] | undefined {\n    for (const key in this.attributes) {\n      if (key.substr(0, 1) === '#') {\n        return [key.substr(1), this.attributes[key]]\n      }\n    }\n    return\n  }\n\n}\n","// tslint:disable forin\n\nexport const dcopy = (src: any) => {\n  //\n  const add = (copy: any, key: string, value: any) => {\n    if (copy instanceof Array) {\n      copy.push(value)\n      return copy[copy.length - 1]\n    }\n    else if (copy instanceof Object) {\n      copy[key] = value\n      return copy[key]\n    }\n  }\n  //\n  const walk = (target: any, copy: any) => {\n    for (const key in target) {\n      //\n      const obj = target[key]\n      if (obj instanceof Date) {\n        const value = new Date(obj.getTime())\n        add(copy, key, value)\n      }\n      else if (obj instanceof Function) {\n        const value = obj\n        add(copy, key, value)\n      }\n      else if (obj instanceof Array) {\n        const value: any = []\n        const last = add(copy, key, value)\n        walk(obj, last)\n      }\n      else if (obj instanceof Object) {\n        const value = {}\n        const last = add(copy, key, value)\n        walk(obj, last)\n      }\n      else {\n        const value = obj\n        add(copy, key, value)\n      }\n    }\n  }\n\n  //\n  if (/number|string|boolean/.test(typeof src)) {\n    return src\n  }\n  //\n  if (src instanceof Date) {\n    return new Date(src.getTime())\n  }\n\n  //\n  const dst = (src instanceof Array) ? [] : {}\n  walk(src, dst)\n  return dst\n\n}\n\nexport const equal = (object1: any, object2: any): boolean => {\n  //\n  const parents: any[] = []\n  const inParents = (o: any) => {\n    for(const key in parents){\n      if(parents[key] === o){\n        return true\n      }\n    }\n    return false\n  }\n  //\n  const equalMain = (o1: any, o2: any): boolean => {\n\n    // strict match\n    // -> function Symbol ...\n    if(o1 === o2){\n      return true\n    }\n    // recircive object\n    if(inParents(o1)){\n      return false\n    }\n\n    // number string boolean\n    const t1 = typeof o1\n    const t2 = typeof o2\n    if (/number|string|boolean/.test(t1)) {\n      return false\n    }\n\n    // Date\n    const isDt1 = o1 instanceof Date\n    const isDt2 = o2 instanceof Date\n    if (isDt1 === true) {\n      if(isDt1 !== isDt2){\n        return false\n      }\n      if(o1.getTime() === o2.getTime()){\n        return true\n      }\n      return false\n    }\n\n    // Array\n    const isAr1 = Array.isArray(o1)\n    const isAr2 = Array.isArray(o2)\n    //\n    if(isAr1 === true){\n      if (isAr2 !== true) {\n        return false\n      }\n      //\n      if (o1.length !== o2.length) {\n        return false\n      }\n      //\n      let result = true\n      parents.push(o1)\n      for(const key in o1){\n        // recircive check\n        if(!equalMain(o1[key], o2[key])){\n          result = false\n          break\n        }\n      }\n      parents.pop()\n      return result\n      //\n    }\n\n    // Array\n    const isObj1 = t1\n    const isObj2 = t2\n    //\n    if (/object/.test(t1)) {\n      if (isObj1 !== isObj2) {\n        return false\n      }\n      //\n      const keysO1 = Object.keys(o1)\n      const keysO2 = Object.keys(o2)\n      if (keysO1.length !== keysO2.length) {\n        return false\n      }\n      //\n      let result = true\n      parents.push(o1)\n      for(const keyO1 of keysO1){\n        // recircive check\n        if(!equalMain(o1[keyO1], o2[keyO1])){\n          result = false\n          break\n        }\n        //\n      }\n      parents.pop()\n      return result\n      //\n    }\n    //\n    return false\n    //\n  }\n\n  //\n  return equalMain(object1, object2)\n  //\n}\n","import {equal, dcopy} from './deep'\n\n//\nexport default class VarProxy {\n\n  constructor(obj: any, prop: string, handler: any, option: {deep: boolean} = {deep :false}){\n\n    //\n    const target = obj[prop]\n\n    //\n    const vTargetType = typeof target\n\n    // functions hook\n    if(vTargetType === 'function'){\n      this.functionsHook(obj, prop, handler, option)\n      return\n    }\n\n    // getter setter hook\n    const varObject = Object.getOwnPropertyDescriptor(Object.getPrototypeOf(obj), prop)\n    if(varObject){\n      this.getterSetterHook(varObject, obj, prop, handler, option)\n      return\n    }\n\n    // array hook\n    if(Array.isArray(target)){\n      this.arrayHook(obj, prop, handler, option)\n      this.varsHook(obj, prop, handler, option)\n      return\n    }\n\n    // vars hook\n    this.varsHook(obj, prop, handler, option)\n\n  }\n\n  //\n  public functionsHook(obj: any, prop: string, handler: any, option?: {deep: boolean}){\n    //\n    const target = obj[prop]\n    //\n    const orgFunc = target\n    Object.defineProperty(obj, prop, {\n      value: (...argv: any[]) => {\n        if(handler.apply){\n          const resultEx = handler.apply(obj, argv, option)\n          if(resultEx !== undefined){\n            return resultEx\n          }\n        }\n        const result = orgFunc.bind(obj)(...argv)\n        if(handler.executed){\n          const resultEx = handler.executed(obj, argv, result, option)\n          if(resultEx !== undefined){\n            return resultEx\n          }\n        }\n        return result\n      },\n      enumerable: true,\n      writable: false\n    })\n  }\n\n  //\n  public arrayHook(obj: any, prop: string, handler: any, option?: {deep: boolean}){\n    //\n    const target = obj[prop] as any[]\n\n    //\n    let inHandler = false\n    //\n\n    //\n    if(Object.getOwnPropertyDescriptor(target, 'proxied') !== undefined){\n      /* istanbul ignore next */\n      return\n    }\n\n    //\n    const oldMethods: {[key:string]: any} = {}\n\n    //\n    const targetMethods = [\n      'push',\n      'pop',\n      'shift',\n      'unshift',\n      'splice',\n      'sort',\n      'reverse',\n    ]\n    //\n    for(const m of targetMethods){\n      oldMethods[m] = target[(m as any)]\n      Object.defineProperty(target, m, {\n        get() {\n          if(inHandler){\n            return oldMethods[m]\n          }\n          inHandler = true\n          if(!option || !option.deep){\n            const oldVal = dcopy(target)\n            ;(process as any).nextTick(() => {\n              inHandler = true\n              // if(!equal(dcopy(target), oldVal)){\n                if(handler.set){\n                  handler.set(target, option)\n                }\n                if(handler.update){\n                  handler.update(target, oldVal, option)\n                }\n              // }\n              inHandler = false\n            })\n          }\n          inHandler = false\n          return oldMethods[m]\n        },\n        enumerable: false,\n      })\n    }\n\n    //\n    /* istanbul ignore next */\n    Object.defineProperty(target, 'proxied', {\n      get() { return true },\n      enumerable: false,\n    })\n    //\n\n  }\n\n  //\n  public varsHook(obj: any, prop: string, handler: any, option?: {deep: boolean}){\n\n    const proxy = this\n\n    // recent val\n    let recentValue: any = obj[prop]\n    // old val\n    let oldValue: any = obj[prop]\n    //\n    let doArrayHook = false\n\n    //\n    let inHandler = false\n    //\n\n    // seter geter\n    Object.defineProperty(obj, prop, {\n      get() {\n        //\n        if(inHandler){\n          return recentValue\n        }\n        inHandler = true\n        //\n        if(doArrayHook){\n          inHandler = false\n          return recentValue\n        }\n        //\n        let result = recentValue\n        if(handler.get){\n          const resultEx = handler.get(option)\n          if(resultEx !== undefined){\n            result = resultEx\n          }\n        }\n\n        //\n        if(typeof recentValue === 'object' && option && option.deep === true){\n          const oldVal = dcopy(recentValue)\n          //\n          ;(process as any).nextTick(() => {\n            inHandler = true\n            if(!equal(dcopy(recentValue), oldVal)){\n              if(handler.set){\n                // console.log(\"SET B\")\n                handler.set(recentValue, option)\n              }\n              if(handler.update){\n                handler.update(recentValue, oldVal, option)\n              }\n              oldValue = recentValue\n            }\n            inHandler = false\n          })\n        }\n\n        //\n        if(handler.afterGet){\n          handler.afterGet(result, option)\n        }\n\n        //\n        inHandler = false\n        return result\n        //\n      },\n      set(v) {\n        //\n        if(inHandler){\n          return\n        }\n        inHandler = true\n        //\n        let setV = v\n        if(handler.set){\n          // console.log(\"SET C\")\n          const resultEx = handler.set(v, option)\n          if(resultEx !== undefined){\n            setV = resultEx\n          }\n        }\n        //\n        oldValue = recentValue\n        recentValue = setV\n        //\n        doArrayHook = true\n        if(Array.isArray(setV)){\n          proxy.arrayHook(obj, prop, handler, option)\n        }\n        doArrayHook = false\n        //\n        if(handler.afterSet){\n          handler.afterSet(recentValue, option)\n        }\n        //\n        if(recentValue !== oldValue){\n          if(handler.update){\n            handler.update(recentValue, oldValue, option)\n          }\n          oldValue = recentValue\n        }\n        //\n        inHandler = false\n        //\n      },\n      enumerable: true,\n      configurable: true\n    })\n    //\n  }\n\n  //\n  public getterSetterHook(varObject: any, obj: any, prop: string, handler: any, option?: {deep: boolean}){\n    //\n    const getter = varObject.get\n    const setter = varObject.set\n    //\n    let oldValue: any\n    //\n    let inHandler = false\n    //\n    Object.defineProperty(obj, prop, {\n      get() {\n        if(getter){\n          //\n          if(inHandler){\n            return oldValue\n          }\n          inHandler = true\n          //\n          if(handler.get){\n            const resultEx = handler.get(option)\n            if(resultEx !== undefined){\n              oldValue = resultEx\n              inHandler = false\n              return resultEx\n            }\n          }\n\n          //\n          const result = getter.bind(obj)()\n\n          //\n          if(handler.afterGet){\n            handler.afterGet(result, option)\n          }\n\n          //\n          oldValue = result\n          inHandler = false\n          return result\n          //\n        }\n        /* istanbul ignore next */\n        return undefined\n      },\n      set(v){\n        if(setter){\n          //\n          if(inHandler){\n            return v\n          }\n          inHandler = true\n          //\n          let setV = v\n          //\n          if(handler.set){\n            // console.log(\"SET D\")\n            const resultEx = handler.set(v, option)\n            if(resultEx !== undefined){\n              setV = resultEx\n            }\n          }\n          //\n          if(oldValue === undefined){\n            oldValue = getter.bind(obj)()\n          }\n          //\n          setter.bind(obj)(setV)\n\n          //\n          if(handler.afterSet){\n            handler.afterSet(setV, option)\n          }\n\n          //\n          if(handler.update && oldValue !== setV){\n            handler.update(setV, oldValue, option)\n          }\n          //\n          inHandler = false\n          //\n        }\n      },\n      enumerable: true,\n      configurable: true\n    })\n    //\n  }\n  //\n}\n","import { consoleError, consoleWarn, consoleDebug, consoleLog } from './console'\nimport VDom from './VDom'\nimport {VDomItem} from './VDomItem'\nimport { CALL_NONE, CALL_EVENT_HANDLER, CALL_FUNCS } from './ReactiveVars'\nimport {ELEMENT_NODE} from './template'\nimport {addListener, removeListener, ListenEventInfo} from './eventListener'\n\n\n\n// tslint:disable max-classes-per-file\nexport default class Transition {\n\n  // transition name\n  private transition?: string\n  // transition dom\n  private transitionVDom?: VDom\n\n  // transition end listener\n  private transitionEndListner?: ListenEventInfo\n\n  // transition custom events\n  private transitionEvents: {[key: string]: any} = {}\n  private transitionListenEvents: ListenEventInfo[] = []\n\n  // transition type\n  private transitionType: string = 'transition'\n\n  // transition info\n  private inTransision?: {elements: Node[], kind: string, callback?: (eles: Node[]) => void}\n\n  //\n  protected resetTransitions(){\n    this.transitionEndEvent()\n  }\n\n  //\n  protected umountTransition(){\n    if(this.transitionEndListner){\n      removeListener(this.transitionEndListner)\n      this.transitionEndListner = undefined\n    }\n    for(const evInfo of this.transitionListenEvents){  // tslint:disable-line forin\n      removeListener(evInfo)\n    }\n    this.transitionListenEvents = []\n  }\n\n\n  // setup\n  protected setupTransition(){\n\n    //\n    const vDomItem = (this as any) as VDomItem\n\n    /*\n    let xx = false\n    if(vDomItem.tagName === 'SPAN'){\n      xx = true\n      console.log(\"SETUP TRANSITION\", vDomItem.tagName)\n    }\n    */\n    //\n    if(!vDomItem.parent){\n      /*\n      if(xx){\n        console.log(\"??????????????????????????\")\n      }\n      */\n      return\n    }\n    //\n    if(vDomItem.parent.tagName !== 'TRANSITION'){\n      /*\n      if(xx){\n        console.log(\"!!!!!!!!!!!!!!!!!!!!!!\")\n      }\n      */\n      return\n    }\n    //\n    if(this.transition){\n      return\n    }\n\n    //\n    this.transitionVDom = vDomItem.vDom\n    this.transition = vDomItem.parent.attributes.name || 'v'\n    this.transitionType = vDomItem.parent.attributes.type || 'transition'\n    this.transitionEvents = vDomItem.parent.parseEvents() || {}\n    /*\n    if(xx){\n      console.log(\"!!!!!!!!!!!!!!!!!!!!!!\", this.transition)\n    }\n    */\n    //\n  }\n\n  //\n  protected isTransitionTarget(){\n\n    /*\n    const vDomItem = (this as any) as VDomItem\n    //\n    if(vDomItem.tagName === 'SPAN'){\n      console.log(\"isTransitionTarget\", this.transition)\n    }\n    */\n    return this.transition\n  }\n\n  //\n  protected doTransition(elements: Node[], isEnter: boolean, callback?: (eles: Node[]) => void) {\n    //\n    if(!this.transition){\n      return\n    }\n\n    //\n    let isTarget = false\n    for(const ele of elements){\n      if(ele.nodeType === ELEMENT_NODE){\n        isTarget = true\n        break\n      }\n    }\n    if(!isTarget){\n      return\n    }\n\n    //\n    const setElementEvent = (tgtEventEle: EventTarget) => {\n\n      // add event listener\n      const transitionListenEvents: ListenEventInfo[] = []\n      for(const evKey in this.transitionEvents){  // tslint:disable-line forin\n        //\n        const pickListener = (element: EventTarget, eventName: string): ListenEventInfo | undefined => {\n          //\n          for(let i = 0; i < this.transitionListenEvents.length; i++){  // tslint:disable-line prefer-for-of\n            const targetvInfo = this.transitionListenEvents[i]\n            if(targetvInfo.element === element && targetvInfo.eventName === eventName){\n              this.transitionListenEvents.splice(i, 1)\n              return targetvInfo\n            }\n          }\n          return undefined\n        }\n        //\n        let evInfo = pickListener(tgtEventEle, evKey)\n        if(!evInfo){\n          const targetEvent = this.transitionEvents[evKey]\n          const eventFunc = (ev: any) => {\n            if (this.transitionVDom && this.transitionVDom.$reactiveVars) {\n\n              const $event = (ev instanceof CustomEvent)? ev.detail: ev\n              this.transitionVDom.$reactiveVars.extContexts({$event}, () => {\n                if(this.transitionVDom){\n                  this.transitionVDom.$reactiveVars.eval(this as any, CALL_FUNCS, targetEvent.value, true, [ev.detail])\n                }\n              })\n              //\n            }\n          }\n          evInfo = addListener(tgtEventEle, evKey, eventFunc, eventFunc.bind(this.transitionVDom), false)\n        }\n        transitionListenEvents.push(evInfo)\n        //\n      }\n      for(const evInfo of this.transitionListenEvents){  // tslint:disable-line forin\n        removeListener(evInfo)\n      }\n      this.transitionListenEvents = transitionListenEvents\n\n      // transition end event\n      if(this.transitionEndListner){\n        if(this.transitionEndListner.element !== tgtEventEle){\n          removeListener(this.transitionEndListner)\n          this.transitionEndListner = undefined\n        }\n      }\n      if(this.transitionEndListner === undefined){\n        this.transitionEndListner = addListener(tgtEventEle, this.transitionType + 'end', this.transitionEndEvent, this.transitionEndEvent.bind(this))\n      }\n      //\n    }\n\n    //\n    const kind = isEnter? 'enter': 'leave'\n    this.inTransision = {kind, elements, callback}\n\n    //\n    let firstElement\n    // start transition\n    for(const ele of this.inTransision.elements){\n      if(ele.nodeType !== ELEMENT_NODE){continue}\n      const tgtEle = ele as HTMLElement\n      this.clearTransitionClasses(tgtEle)\n\n      // first element (for event)\n      if(firstElement === undefined){\n        firstElement = tgtEle\n        setElementEvent(tgtEle)\n      }\n\n      // before-xxx\n      tgtEle.dispatchEvent(new CustomEvent(`before-${kind}`, {detail: this}))\n\n      tgtEle.classList.add(`${this.transition}-${kind}`)\n      tgtEle.classList.add(`${this.transition}-${kind}-active`)\n\n      // xxx\n      tgtEle.dispatchEvent(new CustomEvent(`${kind}`, {detail: this}))\n      //\n    }\n\n    // activete transition\n    for(const ele of this.inTransision.elements){\n      if(ele.nodeType !== ELEMENT_NODE){continue}\n      const tgtEle = ele as HTMLElement\n      //\n      setTimeout(() => {\n        if(this.inTransision){\n          tgtEle.classList.remove(`${this.transition}-${kind}`)\n          tgtEle.classList.add(`${this.transition}-${kind}-to`)\n        }\n      }, 10)\n      //\n    }\n    //\n  }\n\n  // w transition\n  private transitionEndEvent(){\n\n    //\n    if(!this.inTransision){\n      return\n    }\n\n    //\n    if(this.inTransision && this.inTransision.callback){\n      this.inTransision.callback.bind(this)(this.inTransision.elements)\n    }\n    //\n    for(const ele of this.inTransision.elements){\n      if(ele.nodeType !== ELEMENT_NODE){continue}\n      const tgtEle = ele as HTMLElement\n      this.clearTransitionClasses(tgtEle)\n      // xxx\n      tgtEle.dispatchEvent(new CustomEvent(`after-${this.inTransision.kind}`, {detail: this}))\n      //\n    }\n    //\n    this.inTransision = undefined\n    //\n  }\n\n  // clear transision\n  private clearTransitionClasses(target: HTMLElement){\n    //\n    if(!this.transition){\n      return\n    }\n    //\n    target.classList.remove(`${this.transition}-enter-active`)\n    target.classList.remove(`${this.transition}-enter`)\n    target.classList.remove(`${this.transition}-enter-to`)\n    target.classList.remove(`${this.transition}-leave-active`)\n    target.classList.remove(`${this.transition}-leave`)\n    target.classList.remove(`${this.transition}-leave-to`)\n    //\n  }\n\n}\n","import {consoleError, consoleWarn, consoleDebug} from './console'\n\n//\nexport interface ListenEventInfo {\n  element: EventTarget\n  eventName: string\n  eventFunc: (ev:any) => void\n  bindedEventFunc: (ev:any) => void\n  option?: boolean | {capture?: boolean, once?: boolean, passive?: boolean}\n}\n\n/*\nexport const isEqualListener = (evInfo: ListenEventInfo, element: EventTarget, eventName?: string, eventFunc?: (ev:any) => void): boolean => {\n  //\n  if(eventFunc !== undefined){\n    if(evInfo.eventFunc !== eventFunc){\n      return false\n    }\n  }\n  //\n  if(eventName !== undefined){\n    if(evInfo.eventName !== eventName){\n      return false\n    }\n  }\n  //\n  if(evInfo.element !== element){\n    return false\n  }\n  //\n  return true\n  //\n}\n*/\n\n//\nexport const addListener = (element: EventTarget, eventName: string, eventFunc: (ev:any) => void, bindedEventFunc: (ev:any) => void, option?: boolean | {capture?: boolean, once?: boolean, passive?: boolean}): ListenEventInfo => {\n  const evinfo: ListenEventInfo = {element, eventName, bindedEventFunc, eventFunc, option}\n\n  // console.log(\"ADD EVENT !!!\", element, eventName, bindedEventFunc, option)\n\n  element.addEventListener(eventName, bindedEventFunc, option)\n  return evinfo\n}\n\n//\nexport const removeListener = (evInfo?: ListenEventInfo) => {\n  /* istanbul ignore next */\n  if(evInfo === undefined){\n    consoleDebug('VDom invalid listener info')\n    return\n  }\n  evInfo.element.removeEventListener(evInfo.eventName, evInfo.bindedEventFunc, evInfo.option)\n}\n\n\n\n\n\n\n\n","//\nexport default class LRU<D> {\n\n  private max: number = 0\n\n  //\n  private lengthAll: number = 0\n  private datas: {[key: string]: {length: number, data: any}} = {}\n  private lists: string[] = []\n\n  //\n  constructor(option: {\n    max: number,\n    length?: (key: string, data: any) => number,\n    dispose?: (key: string, data: any) => void,\n    maxAge?: number,\n  }){\n    if(option.max > 0){\n      this.max = option.max\n    }\n    if(option.length !== undefined){\n      this.lengthCb = option.length\n    }\n    if(option.dispose !== undefined){\n      this.dispose = option.dispose\n    }\n  }\n\n  //\n  public set(key: string, data: D){\n    //\n    const exists = this.has(key)\n    if(exists){\n      // remove old\n      this.lists.splice(exists.index, 1)\n      this.lengthAll -= exists.object.length\n    }\n\n    // add\n    this.datas[key] = {length: this.lengthCb(key, data), data}\n    this.lengthAll += this.datas[key].length\n    this.lists.unshift(key)\n\n    // gc\n    while(this.lengthAll > this.max && this.lists.length > 0){\n      const removeTgt = this.lists[this.lists.length - 1]\n      this.remove(removeTgt)\n    }\n    //\n    return undefined\n  }\n\n  //\n  public has(key: string): {index: number, object: {length: number, data: any}} | undefined{\n    if(this.datas[key]){\n      const index = this.lists.indexOf(key)\n      return {index, object: this.datas[key]}\n    }\n    return undefined\n  }\n\n  //\n  public remove(key: string): boolean{\n    const exists = this.has(key)\n    if(exists){\n      this.dispose(key, exists.object.data)\n      this.lists.splice(exists.index, 1)\n      this.lengthAll -= exists.object.length\n      delete this.datas[key]\n      return true\n    }\n    return false\n  }\n\n  //\n  public get(key: string): D | undefined{\n    const exists = this.has(key)\n    if(exists){\n      this.lists.splice(exists.index, 1)\n      this.lists.unshift(key)\n      return exists.object.data\n    }\n    return undefined\n  }\n\n  //\n  public peek(key: string): D | undefined{\n    if(this.datas[key] === undefined){\n      return undefined\n    }\n    return this.datas[key].data\n  }\n\n  //\n  public reset(){\n    this.lengthAll = 0\n    this.datas = {}\n    this.lists = []\n  }\n\n  //\n  public length(){\n    return this.lengthAll\n  }\n\n  //\n  public itemCount(){\n    return this.lists.length\n  }\n\n  /*\n  public dump(){\n    return {\n      length: this.lengthAll,\n      datas: this.datas,\n      lists: this.lists,\n    }\n  }\n  // load(cacheEntriesArray)\n  */\n\n  public keys(){\n    return this.lists\n  }\n\n  private lengthCb: (key: string, data: any) => number = () => 1\n  private dispose: (key: string, data: any) => void = () => {/*noop*/}\n\n}\n","//\nconst commentX = /\\/\\*[\\s\\S]*?\\*\\//g\nconst lineAttrX = /([^\\:]+):([^\\;]*);/\nconst altX = /(\\/\\*[\\s\\S]*?\\*\\/)|([^\\s\\;\\{\\}][^\\;\\{\\}]*(?=\\{))|(\\})|([^\\;\\{\\}]+\\;(?!\\s*\\*\\/))/gmi\n\n// Capture groups\nconst capSelector = 2\nconst capEnd = 3\nconst capAttr = 4\n\n//\nconst isEmpty = (x: any) => {\n  return typeof x === 'undefined' || x.length === 0 || x == null\n}\n\n//\nconst isCssJson = (node: any) => {\n  return !isEmpty(node) ? (node.attributes && node.children) : false\n}\n\n//\nconst strAttr = (name: string, value: string, depth: number) => {\n  return name + ': ' + value + ';\\n'\n}\n\n//\nconst strNode = (name: string, value: string, depth: number) => {\n  let cssString = name + ' {\\n'\n  cssString += toCSS(value, depth + 1)\n  cssString += '}\\n'\n  return cssString\n}\n\n//\nexport const toJSON = (cssString: string) => {\n  //\n  const node: any = {\n    children: {},\n    attributes: {}\n  }\n  let count = 0\n\n  //\n  cssString = cssString.replace(commentX, '')\n\n  for (; ;) {\n    //\n    const match = altX.exec(cssString)\n    if (!match) {\n      break\n    }\n    if (!isEmpty(match[capSelector])) {\n      //\n      const name = match[capSelector].trim()\n      const newNode = toJSON(cssString)\n      //\n      const bits = [name]\n      for (const bit of bits) {\n        const sel = bit.trim()\n        if (sel in node.children) {\n          for (const att in newNode.attributes) {// tslint:disable-line: forin\n            node.children[sel].attributes[att] = newNode.attributes[att]\n          }\n        } else {\n          node.children[sel] = newNode\n        }\n      }\n      //\n    } else if (!isEmpty(match[capEnd])) {\n      // Node has finished\n      return node\n    } else if (!isEmpty(match[capAttr])) {\n      const line = match[capAttr].trim()\n      const attr = lineAttrX.exec(line)\n      if (attr) {\n        // Attribute\n        const name = attr[1].trim()\n        const value = attr[2].trim()\n        if (name in node.attributes) {\n          const currVal = node.attributes[name]\n          if (!(currVal instanceof Array)) {\n            node.attributes[name] = [currVal]\n          }\n          node.attributes[name].push(value)\n        } else {\n          node.attributes[name] = value\n        }\n      } else {\n        node[count++] = line\n      }\n    }\n  }\n  //\n  return node\n}\n//\nexport const toCSS = (node: any, depth?: any, breaks?: any) => {\n  //\n  let cssString = ''\n  if (typeof depth === 'undefined') {\n    depth = 0\n  }\n  if (typeof breaks === 'undefined') {\n    breaks = false\n  }\n  //\n  if (node.attributes) {\n    for (const i in node.attributes) {// tslint:disable-line: forin\n      const att = node.attributes[i]\n      if (att instanceof Array) {\n        for (const at of att) {\n          cssString += strAttr(i, at, depth)\n        }\n      } else {\n        cssString += strAttr(i, att, depth)\n      }\n    }\n  }\n  if (node.children) {\n    let first = true\n    for (const i in node.children) {// tslint:disable-line: forin\n      if (breaks && !first) {\n        cssString += '\\n'\n      } else {\n        first = false\n      }\n      cssString += strNode(i, node.children[i], depth)\n    }\n  }\n  return cssString\n}\n//\nexport const toHEAD = (data: string) => {\n  //\n  const head = document.getElementsByTagName('head')[0]\n  //\n  if (isEmpty(data) || !(head instanceof HTMLHeadElement)) {\n    return\n  }\n\n  //\n  if (isCssJson(data)) {\n    data = toCSS(data)\n  }\n\n  const node: any = document.createElement('style')\n  node.type = 'text/css'\n  //\n  if (node.styleSheet) {\n    node.styleSheet.cssText = data\n  } else {\n    node.appendChild(document.createTextNode(data))\n  }\n  //\n  head.appendChild(node)\n  //\n  return node\n  //\n}\n\n","import {consoleError, consoleDebug, consoleWarn, consoleLog} from './console'\nimport {addListener, removeListener, /*isEqualListener, */ListenEventInfo} from './eventListener'\n//\n\nexport default class EmitOn {\n\n  //\n  private $targetEl? : Element\n  // added render\n  private $addedEvents: ListenEventInfo[] = []\n\n  //\n  public $emitOnInit(el: Element){\n    this.$targetEl = el\n  }\n\n  //\n  public $umountEmitOn(){\n    for(const eveInfo of this.$addedEvents){\n      removeListener(eveInfo)\n    }\n    this.$addedEvents = []\n  }\n\n  //\n  public $emit(eventName: string, data: any){\n    //\n    /* istanbul ignore next */\n    if(!this.$targetEl){\n      consoleDebug('INVALID $el', this)\n      return\n    }\n    const event = new CustomEvent(eventName, {detail: data})\n    this.$targetEl.dispatchEvent(event)\n    //\n  }\n  /*\n  //\n  public $once(eventName: string, callback: (ev: any) => void){\n    this.$on(eventName, callback, true)\n  }\n\n  //\n  public $on(eventName: string, callback: (ev: any) => void, once: boolean = false){\n    //\n    if(!this.$targetEl){\n      consoleDebug('INVALID $targetEl', this)\n      return\n    }\n    //\n    const eventFunc = (e: any) => {\n      callback.bind(this)(e.detail)\n    }\n    //\n    const eleInfo = addListener(this.$targetEl, eventName, callback, eventFunc, once?{once:true}:false)\n    this.$addedEvents.push(eleInfo)\n    //\n  }\n\n  //\n  public $off(eventName?: string, callback?: (ev: any) => void){\n    //\n    if(!this.$targetEl){\n      consoleDebug('INVALID $targetEl', this)\n      return\n    }\n\n    //\n    const stayEvents: ListenEventInfo[] = []\n    const removeEvents: ListenEventInfo[] = []\n\n    //\n    for(const eleInfo of this.$addedEvents){\n      if(isEqualListener(eleInfo, this.$targetEl, eventName, callback)){\n        removeEvents.push(eleInfo)\n      }else{\n        stayEvents.push(eleInfo)\n      }\n    }\n    //\n    for(const eleInfo of removeEvents){\n      removeListener(eleInfo)\n    }\n    //\n    this.$addedEvents = stayEvents\n    //\n  }\n  //\n  */\n}\n","import VDom  from './VDom'\n\nexport default class VDomComponent extends VDom {\n  constructor(){\n    super({isComponent: true})\n  }\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n"],"sourceRoot":""}